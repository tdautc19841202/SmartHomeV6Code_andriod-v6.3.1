<html>

<head>
    <meta charset="UTF-8">
    <title>管家首页</title>
    <link rel="stylesheet" type="text/css" href="../css/base.css" />
    <link rel="stylesheet" href="../css/circumstances.css" />
    <link rel="stylesheet" type="text/css" href="../../skinSource/css/skin.css" />
    <script src="../../source/js/rem.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../source/js/jquery-3.1.1.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../source/js/slip.js" type="text/javascript"></script>
</head>
<style type="text/css">
    b {
        font-weight: 500;
    }
</style>

<body>
    <header class="header">
        <a href="javascript:;" id="back"></a>
        <a id="circumstances_tittle" class="autoSwitchLanguager" href="javascript:;">情景任务</a>
        <a id="circumstances_save" class="complete autoSwitchLanguager" href="javascript:;">保存</a>
    </header>
    <div class="content_1 iphoneX" style="display:block;margin-bottom:5rem;">
        <section class="circums">
            <h5 class="taskName" id="changeTaskName">
                <a href="javascript:;">
                    <b id="circumstances_name" class="autoSwitchLanguager">名称</b>
                    <i></i>
                    <span id="circumstances_tittle_1" class="autoSwitchLanguager">情景任务</span>
                </a>
            </h5>
        </section>
        <section class="circums">
            <h5 class="meetCondition">
                <b id="circumstances_condition" class="autoSwitchLanguager">满足任一条件时</b>
                <i class="cir_add"></i>
            </h5>
            <div id="circumstances_nocondition" class="no_task no_cond autoSwitchLanguager">还未添加条件</div>
            <ul class="quest meetTask">
                <!--<li><a class="doorC" href="javascript:;"><span><strong>门磁感应器门磁感应器门磁感应器&nbsp;</strong><em>[客厅客厅客厅客厅客厅]</em><em style="color:#333;font-size:1.3rem;">紧急按钮</em><em>有报警</em></span><i></i></a><div class="delete">删除</div></li>-->
            </ul>
        </section>
        <section class="circums" style="margin-bottom:5rem;">
            <h5 class="executeTask" id="eTask">
                <b id="circumstances_dotask" class="autoSwitchLanguager">执行以下任务</b>
                <i class="cir_add"></i>
            </h5>
            <div id="circumstances_notask" class="no_task no_hide autoSwitchLanguager">还未添加任务</div>
            <ul class="quest" id="task">
                <!--<li><a class="doorC" href="javascript:;"><span><strong>门磁感应器门磁感应器门磁感应器&nbsp;</strong><em>[客厅客厅客厅客厅客厅]</em><em>开关1</em><em>设防</em><em>五分钟后执行</em></span><i></i></a><div class="delete">删除</div></li>-->
                <!--<li><a href='javascript:;' style='background:url(../../source/sceneIcon/scene_normal_01.png) no-repeat left center;background-size:4.3rem auto'><span style='margin-top:0.8rem;'><strong>回家</strong><em style="display:block;clear:both;"></em><em>0分0秒后开始执行</em></span></a><div class='delete deleteAction'>删除</div></li>-->
            </ul>
        </section>
        <section class="circums cir_fix" id="conditionTask" style="background:#fff;display:block;">
            <h5 class="conditionTitle" id="conditionAdd">
                <b id="limitation_factor" class="autoSwitchLanguager">生效条件</b>
                <i id="conditionClick" class="cir_add"></i>
                <!--<em class="conditionRelation">与</em>-->
            </h5>
            <!--<div class="no_task no_condition autoSwitchLanguager" style="display:none;">还未添加生效条件</div>-->
            <ul class="conditionList">
                <!--<li><span style="line-height:5rem;background:url(../fonts/icon_offline.png) no-repeat left center;background-size:3.4rem auto;">设备已删除</span><div class="delete deleteLdArr">删除</div></li>-->
                <!--<li><span><strong>门磁感应器门磁感应器门磁感应器门磁感应器门磁感应器门磁感应器</strong><em>被打开</em><i></i></span><div class="delete">删除</div></li>-->
                <!--<li><span><strong>门磁感应器门磁感应器门磁感应器门磁感应器门磁感应器门磁感应器</strong><em>被打开</em><i></i></span><div class="delete">删除</div></li>-->
                <!--<li><span><strong>离家</strong><em>场景开启时</em><i></i></span><div class="delete">删除</div></li>-->
                <!--<li><span><strong>从00:00到24:00</strong><em>mon、Tue、Wed、Sun</em></span><div class="delete">删除</div></li>-->
            </ul>
        </section>
        <!--<section class="circums cir_fix conditionTime">-->
        <!--<h5>生效时段<i></i><em>从 00:00 到 24:00 Mon,Tue,Wed,Thu,Fri,Sat,Sun</em></h5>-->
        <!--</section>-->
    </div>
    <div class="content_3 iphoneX" style="display:none;">
        <ul class="addTask">
            <li onclick="window.location='action_sceneTask_deviceList.html'">
                <a href="javascript:;" id="circumstances_needdodevice" class="autoSwitchLanguager">添加要执行的设备</a>
            </li>
            <li onclick="window.location='chooseScene1.html'">
                <a href="javascript:;" id="circumstances_needdoscene" class="autoSwitchLanguager">添加要执行的场景</a>
            </li>
        </ul>
    </div>
    <section class="changeName" style="display:none;" id="rename">
        <div class="nameToast">
            <span id="circumstances_rename" class="autoSwitchLanguager">重命名</span>
            <div class="name">
                <input id="renameInput" class="autoSwitchLanguager" maxlength="20" type="text" placeholder="请重新命名" />
                <i class="remove"></i>
            </div>
            <div class="choose_1">
                <a href="javascript:;" key="addDelay_cancel" class="autoSwitchLanguager" onclick="cancel()">取消</a>
                <a href="javascript:;" key="customScene_sure" class="autoSwitchLanguager" onclick="surename()" class="sure_click">确定</a>
            </div>
        </div>
    </section>
    <!--编辑弹框-->
    <section class="changeName" style="display:none;" id="giveUpEdit">
        <div class="nameToast giveUp">
            <span id="circumstances_giveup" class="autoSwitchLanguager">是否放弃编辑</span>
            <div class="choose_1 choose_2">
                <a id="addDelay_cancel" href="javascript:;" class="isNo autoSwitchLanguager">取消</a>
                <a class="giveUpSure autoSwitchLanguager" id="customScene_sure" href="javascript:;">确定</a>
            </div>
        </div>
    </section>
    <!--<section class="toast autoSwitchLanguager" id="circumstances_toast">-->
    <!--名称长度为1-20个字符！-->
    <!--</section>-->
    <section class="relationDialog">
        <div class="relation">
            <strong id="Conditional_relationship" class="autoSwitchLanguager">选择条件关系</strong>
            <ul class="chooseRelative">
                <li>
                    <span id="Conditional_relationship_and" class="autoSwitchLanguager">与：所有条件必须同时满足</span>
                    <i class="choose" data-choose="yes"></i>
                </li>
                <li>
                    <span id="Conditional_relationship_or" class="autoSwitchLanguager">或：只需满足任意一个条件</span>
                    <i class="choose" data-choose=""></i>
                </li>
            </ul>
            <ul class="relativeBtn">
                <li id="houseKeeper1_Oi_Cancel" class="relativeCancel autoSwitchLanguager">取消</li>
                <li id="houseKeeper1_Oi_Confirm" class="relativeOk autoSwitchLanguager">确定</li>
            </ul>
        </div>
    </section>
    <section class="conditionDialog">
        <div class="conditionAlert">
            <span id="Multiple_scenes" class="autoSwitchLanguager">需要多个场景或多个时间段同时做生效条件时，条件关系只能选择“或”，请修改您的设置</span>
            <div id="i_konw" class="conditionBtn autoSwitchLanguager">我知道了</div>
        </div>
    </section>
    <section class="saveToast" style="display:none;">
        <div>
            <i>
                <em class="rotate"></em>
            </i>
            <p key="device_HS05_Loading" class="autoSwitchLanguager">正在加载...</p>
        </div>
    </section>
    <section class="overTime autoSwitchLanguager" key="device_B9_out_of_time">请求超时，请重试</section>
</body>
<script src="../js/leftDelete.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/plus.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/tools.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/gatewayCmd.js" type="text/javascript" charset="utf-8"></script>
<script src="../model/housekeeper.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/getCondition.js" type="text/javascript" charset="utf-8"></script>
<script src="../lang/lang.js" type="text/javascript" charset="utf-8"></script>
<script src="../js/conditionArray.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript">
    var info = window.sysfun;
    info.init("V6Housekeeper");
    var gwID;
    var appID;
    var overtime;
    var reflag = false;
    var actionDic = {}
    initlan();
    //点击添加生效条件判断
    $("#conditionAdd").on("click", function () {
        info.setItem("editFlag", "yes");
        var condition = JSON.parse(info.getItem("conditionArray"));
        //判断json存储对象中是否有生效条件及是否有一条生效条件
        if (condition && condition.length == 1 && condition != "[]") {
            info.setItem("relativeClick", "create");
            $(".relationDialog").show();
        } else {
            window.location = 'action_condition_choose.html'
        }
    });
    if (info.getItem("relative")) {
        if (info.getItem("relative") == "and") {
            $(".choose").attr("data-choose", " ");
            $(".chooseRelative li").eq(0).find(".choose").attr("data-choose", "yes");
        } else {
            $(".choose").attr("data-choose", " ");
            $(".chooseRelative li").eq(1).find(".choose").attr("data-choose", "yes");
        }
    }
    //单选与/或
    $(".choose").on("click", function () {
        $(".choose").attr("data-choose", " ");
        $(this).attr("data-choose", "yes");
    });
    //取消选择与/或关系
    $(".relativeCancel").on("click", function () {
        $(".relationDialog").hide();
    });
    //选择与/或关系
    $(".relativeOk").on("click", function () {
        if ($(".choose[data-choose=yes]").parents("li").index() === 0) {
            //存储与/或关系
            $(".conditionRelation").html(lang_and);
            info.setItem("relative", "and")
        } else {
            info.setItem("relative", "or");
            $(".conditionRelation").html(lang_or);
        }
        if (info.getItem("relativeClick") === "create") {
            window.location = 'action_condition_choose.html'
        }
        $(".relationDialog").hide();
    });
    $(".giveUpSure").on("click",function(){
        info.clear();
        plus.tools.back(function(){});
    });
    plus.plusReady(function () {
        plus.gatewayCmd.androidBack(function () {
            if ($(".content_1").css("display") == "block") {
                if (info.getItem("editFlag") == "yes") {
                    $("#giveUpEdit").show()
                } else {
                    info.clear()
                    plus.tools.back(function(){});
                }
            } else {
                $(".content_1").show();
                $(".content_3").hide();
                $(".complete").show();
            }
        });
        //创建生效条件model
        createConditionArr();
        //从缓存中获取管家名称
        if (info.getItem("programName")) {
            $(".taskName").find("span").html(info.getItem("programName"));
        };
        plus.gatewayCmd.getCurrentGatewayID(function (data) {
            //获取网关Id
            gwID = data;
            plus.gatewayCmd.getCurrentAppID(function (list) {
                //获取appId
                appID = list;
                //判断url中是否有管家id字段
                if (decodeURI(getUrlParam("programID")) != '') {
                    $(".saveToast").show();
                    overtimeWarn();
                    info.setItem("programID", decodeURI(getUrlParam("programID")))
                    //判断缓存中已存在数据  不执行507的数据缓存
                    var actionArr = JSON.parse(info.getItem("actionArray"))
                    if (actionArr != null) {
                        if (actionArr.length > 0) {
                            $(".saveToast").hide();
                            clearOvertimeWarn();
                            edit();
                            meetCondition1();
                            conditionEdit();
                        }
                    } else {
                        read_507(decodeURI(getUrlParam("programID")))
                    }
                } else {
                    edit();
                    meetCondition1();
                    conditionEdit();
                }
            })
        });
        if (reflag) return;
        reflag = true;
    });
    $("#renameInput").on("blur", function () {
        var value = $(this).val();
        var valueFace = noFace(value);
        console.log(valueFace);
        $(this).val(valueFace);
    });

    function noFace(param) {
        var regRule = /\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F]/g;
        param = param.replace(/(^\s*)|(\s*$)/g, "");
        if (param.match(regRule)) {
            param = param.replace(/\uD83C[\uDF00-\uDFFF]|\uD83D[\uDC00-\uDE4F]/g, "");
            return param;
        } else {
            return param;
        }
    }

    //507查询
    function read_507(id) {

        var param = {
            "cmd": "507",
            "gwID": gwID,
            "appID": appID,
            "operType": "R",
            "programID": id,
            "newVer": info.getItem("version")
        }
        plus.gatewayCmd.houserkeep_507(param, function (result) {
            $(".saveToast").hide();
            clearOvertimeWarn();
            if (result.programID == id) {
                info.setItem("status", result.status)
                $(".taskName").find("span").html(result.programName);
                console.log($(".taskName").find("span").html());
                info.setItem("programName", result.programName);
                var arr = [];
                var arr1 = [];
                var arr2 = [];
                //条件数据解析
                if (result.conditionArray) {
                    var timeCount = 0,
                        sceneCount = 0;
                    result.conditionArray.map(function (data) {
                        var conditionArr = {};
                        if (data.exp.indexOf("and") != -1) {
                            //与
                            info.setItem("relative", "and");
                        } else if (data.exp.indexOf("or") != -1) {
                            //或
                            info.setItem("relative", "or");
                        } else {
                            var typeStr = data.exp.split(".")[0];
                            var type = typeStr.substr(typeStr.length - 1, 1);
                            if (type == 0) {
                                conditionArr = {
                                    "exp": data.exp,
                                    "name": data.name,
                                    "icon": data.icon
                                };
                                sceneCount++;
                                arr2.push(conditionArr);
                            } else if (type == 1) {
                                var timeJson = effectTime(data.exp.split("in ")[1]);
                                conditionArr = {
                                    "exp": data.exp,
                                    "startTime": timeJson.startTime,
                                    "endTime": timeJson.endTime,
                                    "weekStr": timeJson.weekStr
                                };
                                timeCount++;
                                arr2.push(conditionArr);
                            } else if (type == 2) {
                                conditionArr = {
                                    "exp": data.exp
                                };
                                //设备type
                                var deviceType = (data.exp.split(">")[2]).substr(0, 2);
                                //设备icon
                                conditionArr.deviceIcon = window.conditionModel[deviceType].icon;
                                //设备name
                                conditionArr.name = data.name.indexOf("#$default$#") != -1 ? window.conditionModel[
                                    deviceType].name + data.name.split("#")[2] : data.name;
                                //设备再编辑时要跳转的url
                                conditionArr.editUrl = window.conditionModel[deviceType].conditionUrl;
                                //特殊符号">" "=" "<" 判断
                                if (data.exp.indexOf("<") != -1) {
                                    window.conditionModel[deviceType].flag = "< "
                                } else if (data.exp.indexOf("=") != -1) {
                                    window.conditionModel[deviceType].flag = "= "
                                } else {
                                    window.conditionModel[deviceType].flag = "> "
                                }
                                //设备端口号
                                var num = data.exp.split(">")[1];
                                //设备的exp
                                var epData = data.exp.split(window.conditionModel[deviceType].flag)[1];
                                //设备该exp下显示的文字
                                conditionArr.deviceState = window.conditionModel[deviceType].action[num]
                                    [epData];
                                if (window.conditionModel[deviceType].flag === "> " || window.conditionModel[
                                        deviceType].flag === "< ") {
                                    //特殊符号判断后在做单独的加单位需求
                                    conditionArr.deviceState = window.conditionModel[deviceType].action[
                                            num][window.conditionModel[deviceType].flag] + epData +
                                        window.conditionModel[deviceType].action[num].unit;
                                    //Ad C0设备并且端口号为4时的特殊显示
                                    if (((deviceType == "Ad" || deviceType == "C0") && num == 4)) {
                                        conditionArr.deviceState = window.conditionModel[deviceType].action[
                                            num][window.conditionModel[deviceType].flag] + epData +
                                            window.conditionModel[deviceType].action[num].unit;
                                    }else if(deviceType == "19"){
                                        //19设备特殊显示
                                        conditionArr.deviceState = window.conditionModel[deviceType].action[
                                            num][window.conditionModel[deviceType].flag] + epData +
                                            window.conditionModel[deviceType].action[num].unit;
                                    }
                                }
                                arr2.push(conditionArr);
                            }
                        }
                    });
                    info.setItem("timeCount", timeCount);
                    info.setItem("sceneCount", sceneCount);
                }
                result.triggerArray.map(function (list) {
                    var triggerArr = {}
                    if (list.type == 0) {
                        triggerArr = {
                            "type": "0",
                            "name": list.name,
                            "exp": list.exp,
                            "icon": list.icon,
                            "object": list.object,
                            "sceneState": ""
                        }
                        if (list.exp == "on") {
                            triggerArr.sceneState = lang_txt01
                        } else {
                            triggerArr.sceneState = lang_txt02
                        }
                        arr.push(triggerArr)
                    } else {
                        triggerArr = {
                            "type": "2",
                            "name": list.name,
                            "exp": list.exp,
                            "object": list.object,
                            "deviceState": "",
                            "deviceIcon": ""
                        }
                        if (list.object.split(">")[2] == "03") {
                            triggerArr.deviceIcon = "url(../../source/deviceIcon/device_icon_03.png)"
                            triggerArr.name = list.name.indexOf("#$default$#") != -1 ? lang_name_03 +
                                list.name.split("#")[2] : list.name;
                            if (list.exp == "=0" || list.exp == "=0$") {
                                triggerArr.deviceState = lang_Arm_02;
                            } else if (list.exp == "=1" || list.exp == "=1$"){
                                triggerArr.deviceState = lang_Arm_01;
                            }else if(list.exp == "=1#"){
                                triggerArr.deviceState = lang_Disarm_01;
                            }else if(list.exp == "=0#"){
                                triggerArr.deviceState = lang_Disarm_02;
                            }
                            triggerArr.editUrl = "setSceneState.html"
                        } else if (list.object.split(">")[2] == "04") {
                            triggerArr.deviceIcon = "url(../../source/deviceIcon/device_icon_04.png)"
                            triggerArr.name = list.name.indexOf("#$default$#") != -1 ? lang_name_04 +
                                list.name.split("#")[2] : list.name
                            if (list.exp == "=0") {
                                triggerArr.deviceState = lang_txt04
                            } else {
                                triggerArr.deviceState = lang_txt_down
                            }
                            triggerArr.editUrl = "setSecurityDevice.html"
                        } else if (list.object.split(">")[2] == "06") {
                            triggerArr.deviceIcon = "url(../../source/deviceIcon/device_icon_06.png)"
                            triggerArr.name = list.name.indexOf("#$default$#") != -1 ? lang_name_06 +
                                list.name.split("#")[2] : list.name
                            if (list.exp == "=0") {
                                triggerArr.deviceState = lang_txt04
                            } else {
                                triggerArr.deviceState = lang_txt05
                            }
                            triggerArr.editUrl = "setSecurityDevice.html"
                        } else if (list.object.split(">")[2] == "02") {
                            triggerArr.deviceIcon = "url(../../source/deviceIcon/device_icon_02.png)"
                            triggerArr.name = list.name.indexOf("#$default$#") != -1 ? lang_name_02 +
                                list.name.split("#")[2] : list.name;
                            if (list.exp == "=0") {
                                triggerArr.deviceState = lang_txt06
                            } else if (list.exp == "=1" || list.exp == "=1$") {
                                triggerArr.deviceState = lang_txt07
                            } else if (list.exp == "=0#") {
                                triggerArr.deviceState = lang_txt08
                            } else if (list.exp == "=1#") {
                                triggerArr.deviceState = lang_txt09
                            }
                            triggerArr.editUrl = "setSecurityDevice.html"
                        } else if (list.object.split(">")[2] == "43") {
                            triggerArr.deviceIcon = "url(../../source/deviceIcon/device_icon_43.png)"
                            triggerArr.name = list.name.indexOf("#$default$#") != -1 ? lang_name_43 +
                                list.name.split("#")[2] : list.name
                            if (list.exp == "=0") {
                                triggerArr.deviceState = lang_txt04
                            } else {
                                triggerArr.deviceState = lang_txt10
                            }
                            triggerArr.editUrl = "setSecurityDevice.html"
                        } else if (list.object.split(">")[2] == "09") {
                            triggerArr.deviceIcon = "url(../../source/deviceIcon/device_icon_09.png)"
                            triggerArr.name = list.name.indexOf("#$default$#") != -1 ? lang_name_09 +
                                list.name.split("#")[2] : list.name
                            if (list.exp == "=0") {
                                triggerArr.deviceState = lang_txt04
                            } else {
                                triggerArr.deviceState = lang_txt11
                            }
                            triggerArr.editUrl = "setSecurityDevice.html"
                        } else if (list.object.split(">")[2] == "17") {
                            triggerArr.deviceIcon = "url(../../source/deviceIcon/device_icon_17.png)"
                            triggerArr.name = list.name.indexOf("#$default$#") != -1 ? lang_name_17 +
                                list.name.split("#")[2] : list.name
                            if (list.object.split(">")[1] == "1") {
                                if (list.exp.indexOf(">") != -1) {
                                    triggerArr.deviceState = lang_txt12 + list.exp.split(">")[1] + "℃"
                                } else {
                                    triggerArr.deviceState = lang_txt13 + list.exp.split("<")[1] + "℃"
                                }
                            } else {
                                if (list.exp.indexOf(">") != -1) {
                                    triggerArr.deviceState = lang_txt14 + list.exp.split(">")[1] + "%"
                                } else {
                                    triggerArr.deviceState = lang_txt15 + list.exp.split("<")[1] + "%"
                                }
                            }
                            triggerArr.editUrl = "setHumitureDevice.html"
                        } else if (list.object.split(">")[2] == "12") {
                            triggerArr.deviceIcon = "url(../../source/deviceIcon/device_icon_12.png)"
                            triggerArr.name = list.name.indexOf("#$default$#") != -1 ? lang_name_12 +
                                list.name.split("#")[2] : list.name
                            if (list.exp == "=1") {
                                triggerArr.deviceState = lang_txt01;
                            } else if (list.exp == "=0") {
                                triggerArr.deviceState = lang_txt02;
                            }
                            triggerArr.editUrl = "setSecurityDevice.html"
                        } else if (list.object.split(">")[2] == "A5") {
                            triggerArr.deviceIcon = "url(../../source/deviceIcon/device_icon_A5.png)"
                            triggerArr.name = list.name.indexOf("#$default$#") != -1 ? lang_name_A5 +
                                list.name.split("#")[2] : list.name
                            if (list.exp == "=0") {
                                triggerArr.deviceState = lang_txt04
                            } else {
                                triggerArr.deviceState = lang_txt_down
                            }
                            triggerArr.editUrl = "setSecurityDevice.html"
                        } else if (list.object.split(">")[2] == "42") {
                            triggerArr.deviceIcon = "url(../../source/deviceIcon/device_icon_42.png)"
                            triggerArr.name = list.name.indexOf("#$default$#") != -1 ? lang_name_42 +
                                list.name.split("#")[2] : list.name
                            if (list.object.split(">")[1] == "1") {
                                if (list.exp.indexOf(">") != -1) {
                                    triggerArr.deviceState = lang_txt_42_1 + list.exp.split(">")[1] +
                                        "ppm"
                                } else {
                                    triggerArr.deviceState = lang_txt_42_2 + list.exp.split("<")[1] +
                                        "ppm"
                                }
                            }
                            triggerArr.editUrl = "setcarbonDioxideDevice.html"
                        } else if (list.object.split(">")[2] == "Av") {
                            triggerArr.deviceIcon = "url(../../source/deviceIcon/device_icon_Av.png)";
                            triggerArr.name = list.name.indexOf("#$default$#") != -1 ? lang_name_Av +
                                list.name.split("#")[2] : list.name;
                            if (list.exp == "=1") {
                                triggerArr.deviceState = lang_txt01;
                            } else if (list.exp == "=0") {
                                triggerArr.deviceState = lang_txt02;
                            }
                            triggerArr.editUrl = "setSecurityDevice.html"
                        } else if (list.object.split(">")[2] == "Bc") {
                            triggerArr.deviceIcon = "url(../../source/deviceIcon/device_icon_Bc.png)"
                            triggerArr.name = list.name.indexOf("#$default$#") != -1 ? lang_name_Bc +
                                list.name.split("#")[2] : list.name
                            if (list.exp == "=1" || list.exp == "=1$") {
                                triggerArr.deviceState = lang_txt01;
                            } else if (list.exp == "=2") {
                                triggerArr.deviceState = lang_txt_ringDoor;
                            }
                            triggerArr.editUrl = "setSecurityDevice.html"
                        } else if (list.object.split(">")[2] == "OP") {
                            triggerArr.deviceIcon = "url(../../source/deviceIcon/device_icon_OP.png)"
                            triggerArr.name = list.name.indexOf("#$default$#") != -1 ? lang_name_OP +
                                list.name.split("#")[2] : list.name
                            if (list.exp == "=1" || list.exp == "=1$") {
                                triggerArr.deviceState = lang_txt01;
                            }
                            triggerArr.editUrl = "setSecurityDevice.html"
                        } else if (list.object.split(">")[2] == "Bd") {
                            triggerArr.deviceIcon = "url(../../source/deviceIcon/device_icon_Bd.png)"
                            triggerArr.name = list.name.indexOf("#$default$#") != -1 ? lang_name_Bd +
                                list.name.split("#")[2] : list.name
                            if (list.exp == "=1" || list.exp == "=1$") {
                                triggerArr.deviceState = lang_txt01;
                            } else if (list.exp == "=2") {
                                triggerArr.deviceState = lang_txt_ringDoor;
                            }
                            triggerArr.editUrl = "setSecurityDevice.html"
                        } else if (list.object.split(">")[2] == "OW") {
                            triggerArr.deviceIcon = "url(../../source/deviceIcon/device_icon_OW.png)"
                            triggerArr.name = list.name.indexOf("#$default$#") != -1 ? lang_name_OW +
                                list.name.split("#")[2] : list.name
                            if (list.exp == "=1" || list.exp == "=1$") {
                                triggerArr.deviceState = lang_txt01;
                            }
                            triggerArr.editUrl = "setSecurityDevice.html"
                        } else if (list.object.split(">")[2] == "Bg") {
                            triggerArr.deviceIcon = "url(../../source/deviceIcon/device_icon_Bg.png)"
                            triggerArr.name = list.name.indexOf("#$default$#") != -1 ? lang_name_Bg +
                                list.name.split("#")[2] : list.name
                            if (list.exp == "=1" || list.exp == "=1$") {
                                triggerArr.deviceState = lang_txt01;
                            } else if (list.exp == "=2") {
                                triggerArr.deviceState = lang_txt_ringDoor;
                            }
                            triggerArr.editUrl = "setSecurityDevice.html"
                        } else if (list.object.split(">")[2] == "Bf") {
                            triggerArr.deviceIcon = "url(../../source/deviceIcon/device_icon_Bf.png)"
                            triggerArr.name = list.name.indexOf("#$default$#") != -1 ? lang_name_Bf +
                                list.name.split("#")[2] : list.name
                            if (list.exp == "=1" || list.exp == "=1$") {
                                triggerArr.deviceState = lang_txt01;
                            } else if (list.exp == "=2") {
                                triggerArr.deviceState = lang_txt_ringDoor;
                            }
                            triggerArr.editUrl = "setSecurityDevice.html"
                        } else if (list.object.split(">")[2] == "70") {
                            triggerArr.deviceIcon = "url(../../source/deviceIcon/device_icon_70.png)"
                            triggerArr.name = list.name.indexOf("#$default$#") != -1 ? lang_name_70 +
                                list.name.split("#")[2] : list.name
                            if (list.exp == "=1" || list.exp == "=1$") {
                                triggerArr.deviceState = lang_txt01;
                            }
                            triggerArr.editUrl = "setSecurityDevice.html"
                        } else if (list.object.split(">")[2] == "Bn") {
                            triggerArr.deviceIcon = "url(../../source/deviceIcon/device_icon_Bn.png)"
                            triggerArr.name = list.name.indexOf("#$default$#") != -1 ? lang_name_Bn +
                                list.name.split("#")[2] : list.name
                            if (list.exp == "=1" || list.exp == "=1$") {
                                triggerArr.deviceState = lang_txt01;
                            } else if (list.exp == "=2") {
                                triggerArr.deviceState = lang_txt_ringDoor;
                            }
                            triggerArr.editUrl = "setSecurityDevice.html"
                        } else if (list.object.split(">")[2] == "A0") {
                            triggerArr.deviceIcon = "url(../../source/deviceIcon/device_icon_A0.png)"
                            triggerArr.name = list.name.indexOf("#$default$#") != -1 ? lang_name_A0 +
                                list.name.split("#")[2] : list.name
                            if (list.object.split(">")[1] == "1") {
                                if (list.exp.indexOf(">") != -1) {
                                    triggerArr.deviceState = lang_txt_42_1 + list.exp.split(">")[1] +
                                        "ppm"
                                } else {
                                    triggerArr.deviceState = lang_txt_42_2 + list.exp.split("<")[1] +
                                        "ppm"
                                }
                            }
                            triggerArr.editUrl = "setcarbonDioxideDevice.html"
                        } else if (list.object.split(">")[2] == "D4") {
                            triggerArr.deviceIcon = "url(../../source/deviceIcon/device_icon_D4.png)"
                            triggerArr.name = list.name.indexOf("#$default$#") != -1 ? lang_name_D4 +
                                list.name.split("#")[2] : list.name
                            if (list.object.split(">")[1] == "1") {
                                if (list.exp.indexOf(">") != -1) {
                                    triggerArr.deviceState = lang_txt_42_1 + list.exp.split(">")[1] +
                                        "dB"
                                } else {
                                    triggerArr.deviceState = lang_txt_42_2 + list.exp.split("<")[1] +
                                        "dB"
                                }
                            }
                            triggerArr.editUrl = "setcarbonDioxideDevice.html"
                        } else if (list.object.split(">")[2] == "D5") {
                            triggerArr.deviceIcon = "url(../../source/deviceIcon/device_icon_D5.png)"
                            triggerArr.name = list.name.indexOf("#$default$#") != -1 ? lang_name_D5 +
                                list.name.split("#")[2] : list.name
                            if (list.object.split(">")[1] == "1") {
                                if (list.exp.indexOf(">") != -1) {
                                    triggerArr.deviceState = lang_txt_42_1 + list.exp.split(">")[1] +
                                        "ppm"
                                } else {
                                    triggerArr.deviceState = lang_txt_42_2 + list.exp.split("<")[1] +
                                        "ppm"
                                }
                            }
                            triggerArr.editUrl = "setcarbonDioxideDevice.html"
                        } else if (list.object.split(">")[2] == "44") {
                            triggerArr.deviceIcon = "url(../../source/deviceIcon/device_icon_44.png)"
                            triggerArr.name = list.name.indexOf("#$default$#") != -1 ? lang_name_44 +
                                list.name.split("#")[2] : list.name
                            if (list.object.split(">")[1] == "1") {
                                if (list.exp.indexOf(">") != -1) {
                                    triggerArr.deviceState = lang_txt_42_1 + list.exp.split(">")[1] +
                                        "ug/m3"
                                } else {
                                    triggerArr.deviceState = lang_txt_42_2 + list.exp.split("<")[1] +
                                        "ug/m3"
                                }
                            }
                            triggerArr.editUrl = "setcarbonDioxideDevice.html"
                        } else if (list.object.split(">")[2] == "D6") {
                            triggerArr.deviceIcon = "url(../../source/deviceIcon/device_icon_D6.png)"
                            triggerArr.name = list.name.indexOf("#$default$#") != -1 ? lang_name_D6 +
                                list.name.split("#")[2] : list.name
                            if (list.object.split(">")[1] == "1") {
                                if (list.exp.indexOf(">") != -1) {
                                    triggerArr.deviceState = lang_txt_42_1 + list.exp.split(">")[1] +
                                        "ppm"
                                } else {
                                    triggerArr.deviceState = lang_txt_42_2 + list.exp.split("<")[1] +
                                        "ppm"
                                }
                            }
                            triggerArr.editUrl = "setcarbonDioxideDevice.html"
                        } else if (list.object.split(">")[2] == "19") {
                            triggerArr.deviceIcon = "url(../../source/deviceIcon/device_icon_19.png)"
                            triggerArr.name = list.name.indexOf("#$default$#") != -1 ? lang_name_19 +
                                list.name.split("#")[2] : list.name
                            if (list.object.split(">")[1] == "1") {
                                if (list.exp.indexOf(">") != -1) {
                                    var lx1 = list.exp.split(">")[1];
                                    triggerArr.deviceState = lang_19_above + lx1 + "LX";
                                } else {
                                    var lx2 = list.exp.split("<")[1];
                                    triggerArr.deviceState = lang_19_below + lx2 + "LX";
                                }
                            }
                            triggerArr.editUrl = "setLightIntensity.html"
                        } else if (list.object.split(">")[2] == "Og") {
                            triggerArr.deviceIcon = "url(../../source/deviceIcon/device_icon_Og.png)"
                            triggerArr.name = list.name.indexOf("#$default$#") != -1 ? lang_name_Og +
                                list.name.split("#")[2] : list.name
                            if (list.object.split(">")[1] == "1") {
                                if (list.exp.indexOf(">") != -1) {
                                    triggerArr.deviceState = lang_txt_42_1 + list.exp.split(">")[1] +
                                        "μg/m3"
                                } else {
                                    triggerArr.deviceState = lang_txt_42_2 + list.exp.split("<")[1] +
                                        "μg/m3"
                                }
                            }else if(list.object.split(">")[1] == "4"){
                                if (list.exp.indexOf(">") != -1) {
                                    triggerArr.deviceState = lang_deviceTxt1 + list.exp.split(">")[1] + "℃"
                                } else {
                                    triggerArr.deviceState = lang_deviceTxt2 + list.exp.split("<")[1] + "℃"
                                }
                            }else if(list.object.split(">")[1] == "5"){
                                if (list.exp.indexOf(">") != -1) {
                                    triggerArr.deviceState = lang_deviceTxt3 + list.exp.split(">")[1] + "%"
                                } else {
                                    triggerArr.deviceState = lang_deviceTxt4 + list.exp.split("<")[1] + "%"
                                }
                            }
                            triggerArr.editUrl = "device_Og.html"
                        } else if (list.object.split(">")[2] == "a1") {
                            triggerArr.deviceIcon = "url(../../source/deviceIcon/device_icon_a1.png)"
                            triggerArr.name = list.name.indexOf("#$default$#") != -1 ? lang_name_a1 +
                                list.name.split("#")[2] : list.name
                            if (list.exp == "=0") {
                                triggerArr.deviceState = lang_a1_normal
                            } else if (list.exp == "=2" || list.exp == "=2$") {
                                triggerArr.deviceState = lang_a1_left
                            } else if (list.exp == "=3" || list.exp == "=3$") {
                                triggerArr.deviceState = lang_a1_right
                            }
                            triggerArr.editUrl = "setSecurityDevice.html"
                        } else if (list.object.split(">")[2] == "69") {
                            triggerArr.deviceIcon = "url(../../source/deviceIcon/device_icon_69.png)"
                            triggerArr.name = list.name.indexOf("#$default$#") != -1 ? lang_name_69 +
                                list.name.split("#")[2] : list.name
                            if (list.exp == "=1" || list.exp == "=1$") {
                                triggerArr.deviceState = lang_txt01;
                            }
                            triggerArr.editUrl = "setSecurityDevice.html"
                        } else if (list.object.split(">")[2] == "Ad") {
                            triggerArr.deviceIcon = "url(../../source/deviceIcon/device_icon_Ad.png)"
                            triggerArr.name = list.name.indexOf("#$default$#") != -1 ? lang_name_Ad +
                                list.name.split("#")[2] : list.name
                            if (list.object.split(">")[1] == "1") { //红外
                                if (list.exp == "=0") {
                                    triggerArr.deviceState = lang_txt06
                                } else if (list.exp == "=1" || list.exp == "=1$") {
                                    triggerArr.deviceState = lang_txt07
                                } else if (list.exp == "=0#") {
                                    triggerArr.deviceState = lang_txt08
                                } else if (list.exp == "=1#") {
                                    triggerArr.deviceState = lang_txt09
                                }
                            } else if (list.object.split(">")[1] == "2") { //温度
                                if (list.exp.indexOf(">") != -1) {
                                    triggerArr.deviceState = lang_txt12 + list.exp.split(">")[1] + "℃"
                                } else {
                                    triggerArr.deviceState = lang_txt13 + list.exp.split("<")[1] + "℃"
                                }
                            } else if (list.object.split(">")[1] == "3") { //湿度
                                if (list.exp.indexOf(">") != -1) {
                                    triggerArr.deviceState = lang_txt14 + list.exp.split(">")[1] + "%"
                                } else {
                                    triggerArr.deviceState = lang_txt15 + list.exp.split("<")[1] + "%"
                                }
                            } else if (list.object.split(">")[1] == "4") { //光强
                                if (list.exp.indexOf(">") != -1) {
                                    var lx1 = list.exp.split(">")[1];
                                    triggerArr.deviceState = lang_19_above + lx1 + "LX";
                                } else {
                                    var lx2 = list.exp.split("<")[1];
                                    triggerArr.deviceState = lang_19_below + lx2 + "LX";
                                }
                            }
                            triggerArr.editUrl = "setMultifunctional.html"
                        } else if (list.object.split(">")[2] == "C0") {
                            triggerArr.deviceIcon = "url(../../source/deviceIcon/device_icon_Ad.png)"
                            triggerArr.name = list.name.indexOf("#$default$#") != -1 ? lang_name_Ad +
                                list.name.split("#")[2] : list.name
                            if (list.object.split(">")[1] == "1") { //红外
                                if (list.exp == "=0") {
                                    triggerArr.deviceState = lang_txt06
                                } else if (list.exp == "=1" || list.exp == "=1$") {
                                    triggerArr.deviceState = lang_txt07
                                } else if (list.exp == "=0#") {
                                    triggerArr.deviceState = lang_txt08
                                } else if (list.exp == "=1#") {
                                    triggerArr.deviceState = lang_txt09
                                }
                            } else if (list.object.split(">")[1] == "2") { //温度
                                if (list.exp.indexOf(">") != -1) {
                                    triggerArr.deviceState = lang_txt12 + list.exp.split(">")[1] + "℃"
                                } else {
                                    triggerArr.deviceState = lang_txt13 + list.exp.split("<")[1] + "℃"
                                }
                            } else if (list.object.split(">")[1] == "3") { //湿度
                                if (list.exp.indexOf(">") != -1) {
                                    triggerArr.deviceState = lang_txt14 + list.exp.split(">")[1] + "%"
                                } else {
                                    triggerArr.deviceState = lang_txt15 + list.exp.split("<")[1] + "%"
                                }
                            } else if (list.object.split(">")[1] == "4") { //光强
                                if (list.exp.indexOf(">") != -1) {
                                    var lx1 = list.exp.split(">")[1];
                                    triggerArr.deviceState = lang_19_above + lx1 + "LX";
                                } else {
                                    var lx2 = list.exp.split("<")[1];
                                    triggerArr.deviceState = lang_19_below + lx2 + "LX";
                                }
                            }
                            triggerArr.editUrl = "setMultifunctional.html"
                        } else if (list.object.split(">")[2] == "A1") {
                            triggerArr.deviceIcon =
                                "url(../../source/deviceIcon/device_icon_a1_01.png)"
                            triggerArr.name = list.name.indexOf("#$default$#") != -1 ? lang_name_A1 +
                                list.name.split("#")[2] : list.name
                            if (list.exp == "=1" || list.exp == "=1$") {
                                triggerArr.deviceState = lang_A1_alarm;
                            } else if (list.exp == "=0") {
                                triggerArr.deviceState = lang_A1_normal;
                            }
                            if (list.epName) {
                                triggerArr.epName = list.epName;
                            }else{
                                triggerArr.epName = triggerArr.object.split(">")[1] + lang_A1_way;
                            }
                            triggerArr.editUrl = "switch_At_sceneTask.html"
                        } else if (list.object.split(">")[2] == "B9") {
                            triggerArr.deviceIcon = "url(../../source/deviceIcon/device_icon_B9.png)"
                            triggerArr.name = list.name.indexOf("#$default$#") != -1 ? lang_name_B9 +
                                list.name.split("#")[2] : list.name
                            if (list.exp == "=1" || list.exp == "=1$") {
                                triggerArr.deviceState = lang_A1_alarm;
                            } else if (list.exp == "=0") {
                                triggerArr.deviceState = lang_A1_normal;
                            }
                            if (list.epName) {
                                triggerArr.epName = list.epName;
                            }
                            triggerArr.editUrl = "setSecurityDevice.html"
                        } else if (list.object.split(">")[2] == "Bq") {
                            triggerArr.deviceIcon = "url(../../source/deviceIcon/device_icon_Bq.png)"
                            triggerArr.name = list.name.indexOf("#$default$#") != -1 ? lang_name_Bq +
                                list.name.split("#")[2] : list.name
                            if (list.exp == "=1" || list.exp == "=1$") {
                                triggerArr.deviceState = lang_txt01;
                            } else if (list.exp == "=2") {
                                triggerArr.deviceState = lang_txt_ringDoor;
                            }
                            triggerArr.editUrl = "setSecurityDevice.html"
                        } else if (list.object.split(">")[2] == "Bu") {
                            triggerArr.deviceIcon = "url(../../source/deviceIcon/device_icon_Bu.png)";
                            triggerArr.name = list.name.indexOf("#$default$#") != -1 ? lang_name_Bu + list.name.split("#")[2] : list.name;
                            if (list.exp == "=2") {
                                triggerArr.deviceState = lang_txt_down;
                            }
                            triggerArr.editUrl = "action_triggerTask_setSwitch.html"
                        } else if (list.object.split(">")[2] == "Bv") {
                            triggerArr.deviceIcon = "url(../../source/deviceIcon/device_icon_Bv.png)";
                            triggerArr.name = list.name.indexOf("#$default$#") != -1 ? lang_name_Bv + list.name.split("#")[2] : list.name;
                            if (list.exp == "=2") {
                                triggerArr.deviceState = lang_txt_down;
                            }
                            if(list.epName){
                                triggerArr.epName = list.epName;
                            }else{
                                triggerArr.epName = triggerArr.object.split(">")[1] + lang_A1_way;
                            }
                            triggerArr.editUrl = "action_triggerTask_setSwitch.html"
                        } else if (list.object.split(">")[2] == "Bw") {
                            triggerArr.deviceIcon = "url(../../source/deviceIcon/device_icon_Bw.png)";
                            triggerArr.name = list.name.indexOf("#$default$#") != -1 ? lang_name_Bw + list.name.split("#")[2] : list.name;
                            if (list.exp == "=2") {
                                triggerArr.deviceState = lang_txt_down;
                            }
                            if(list.epName){
                                triggerArr.epName = list.epName;
                            }else{
                                triggerArr.epName = triggerArr.object.split(">")[1] + lang_A1_way;
                            }
                            triggerArr.editUrl = "action_triggerTask_setSwitch.html"
                        } else if (list.object.split(">")[2] == "Ca") {
                            triggerArr.deviceIcon = "url(../../source/deviceIcon/device_icon_Ca.png)";
                            triggerArr.name = list.name.indexOf("#$default$#") != -1 ? device_Ca_name + list.name.split("#")[2] : list.name;
                            if (list.exp == "=1") {
                                triggerArr.deviceState = lang_Ca_up_btn;
                            }else if(list.exp === "=2"){
                                triggerArr.deviceState = lang_Ca_down_btn;
                            }
                            triggerArr.editUrl = "action_Ca_triggerTask.html";
                        } else if (list.object.split(">")[2] == "Cb") {
                            triggerArr.deviceIcon = "url(../../source/deviceIcon/device_icon_Cb.png)";
                            triggerArr.name = list.name.indexOf("#$default$#") != -1 ? device_Cb_name + list.name.split("#")[2] : list.name;
                            if (list.exp == "=1") {
                                triggerArr.deviceState = "1" + lang_A1_way + lang_Ca_up + lang_txt_down;
                            } else if(list.exp === "=2"){
                                triggerArr.deviceState = "1" + lang_A1_way + lang_Ca_down + lang_txt_down;
                            } else if(list.exp === "=3"){
                                triggerArr.deviceState = "2" + lang_A1_way + lang_Ca_up + lang_txt_down;
                            } else if(list.exp === "=4"){
                                triggerArr.deviceState = "2" + lang_A1_way + lang_Ca_down + lang_txt_down;
                            }
                            triggerArr.editUrl = "action_Ca_triggerTask.html";
                        } else if (list.object.split(">")[2] == "Aj") {
                            triggerArr.deviceIcon = "url(../../source/deviceIcon/device_icon_Aj.png)";
                            triggerArr.name = list.name.indexOf("#$default$#") != -1 ? lang_name_Aj + list.name.split("#")[2] : list.name;
                            if (list.exp == "=1") {
                                triggerArr.deviceState = lang_txt_beopened;
                            }else{
                                triggerArr.deviceState = lang_txt_beclosed;
                            }
                            triggerArr.editUrl = "setSecurityDevice.html"
                        } else if (list.object.split(">")[2] == "At") {
                            triggerArr.deviceIcon = "url(../../source/deviceIcon/device_icon_At.png)";
                            triggerArr.name = list.name.indexOf("#$default$#") != -1 ? lang_name_At + list.name.split("#")[2] : list.name;
                            if (list.exp == "=1") {
                                triggerArr.deviceState = lang_txt_beopened;
                            }else{
                                triggerArr.deviceState = lang_txt_beclosed;
                            }
                            if(list.epName){
                                triggerArr.epName = list.epName;
                            }else{
                                triggerArr.epName = device_switch + triggerArr.object.split(">")[1];
                            }
                            triggerArr.editUrl = "action_triggerTask_switchName.html"
                        } else if (list.object.split(">")[2] == "Cl") {
                            triggerArr.deviceIcon = "url(../../source/deviceIcon/device_icon_Cl.png)";
                            triggerArr.name = list.name.indexOf("#$default$#") != -1 ? lang_name_Cl + list.name.split("#")[2] : list.name;
                            if (list.exp == "=2") {
                                triggerArr.deviceState = lang_txt_down;
                            }
                            triggerArr.editUrl = "action_triggerTask_setSwitch.html"
                        } else if (list.object.split(">")[2] == "Cm") {
                            triggerArr.deviceIcon = "url(../../source/deviceIcon/device_icon_Cm.png)";
                            triggerArr.name = list.name.indexOf("#$default$#") != -1 ? lang_name_Cm + list.name.split("#")[2] : list.name;
                            if (list.exp == "=2") {
                                triggerArr.deviceState = lang_txt_down;
                            }
                            if(list.epName){
                                triggerArr.epName = list.epName;
                            }else{
                                triggerArr.epName = triggerArr.object.split(">")[1] + lang_A1_way;
                            }
                            triggerArr.editUrl = "action_triggerTask_setSwitch.html"
                        } else if (list.object.split(">")[2] == "Cn") {
                            triggerArr.deviceIcon = "url(../../source/deviceIcon/device_icon_Cn.png)";
                            triggerArr.name = list.name.indexOf("#$default$#") != -1 ? lang_name_Cn + list.name.split("#")[2] : list.name;
                            if (list.exp == "=2") {
                                triggerArr.deviceState = lang_txt_down;
                            }
                            if(list.epName){
                                triggerArr.epName = list.epName;
                            }else{
                                triggerArr.epName = triggerArr.object.split(">")[1] + lang_A1_way;
                            }
                            triggerArr.editUrl = "action_triggerTask_setSwitch.html"
                        }
                        arr.push(triggerArr)
                    }
                })
                //执行任务数据解析
                result.actionArray.map(function (item, i) {
                    var dataJson = {};
                    if (item.type == 2) {
                        detaJson = {
                            "type": "2",
                            "name": "",
                            "delay": "",
                            "epData": item.epData,
                            "object": item.object,
                            "deviceState": "",
                            "deviceIcon": "",
                            "roomName": item.roomName
                        }
                        if (item.object.split(">")[2] == "03") {
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_03.png)"
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_03 +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "setDeviceState.html";
                            if (item.epData == "0") {
                                detaJson.deviceState = lang_txt18
                            } else {
                                detaJson.deviceState = lang_txt19
                            }
                        } else if (item.object.split(">")[2] == "50") {
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_50.png)"
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_50 +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "setSocketState.html";
                            if (item.epData == "0") {
                                detaJson.deviceState = lang_txt_close
                            } else {
                                detaJson.deviceState = lang_txt_open
                            }
                        } else if (item.object.split(">")[2] == "Bt") {
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_Bt.png)"
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_Bt +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "setSocketState.html";
                            if (item.epData == "0") {
                                detaJson.deviceState = lang_txt_close
                            } else {
                                detaJson.deviceState = lang_txt_open
                            }
                        } else if (item.object.split(">")[2] == "06") {
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_06.png)"
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_06 +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "setDeviceState.html";
                            if (item.epData == "0") {
                                detaJson.deviceState = lang_txt18
                            } else {
                                detaJson.deviceState = lang_txt19
                            }
                        } else if (item.object.split(">")[2] == "02") {
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_02.png)"
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_02 +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "setDeviceState.html";
                            if (item.epData == "0") {
                                detaJson.deviceState = lang_txt18
                            } else {
                                detaJson.deviceState = lang_txt19
                            }
                        } else if (item.object.split(">")[2] == "43") {
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_43.png)"
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_43 +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "setDeviceState.html";
                            if (item.epData == "0") {
                                detaJson.deviceState = lang_txt18
                            } else {
                                detaJson.deviceState = lang_txt19
                            }
                        } else if (item.object.split(">")[2] == "09") {
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_09.png)"
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_09 +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "setDeviceState.html";
                            if (item.epData == "0") {
                                detaJson.deviceState = lang_txt18
                            } else {
                                detaJson.deviceState = lang_txt19
                            }
                        } else if (item.object.split(">")[2] == "01") {
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_01.png)"
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_01 +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "setDeviceState.html";
                            if (item.epData == "0") {
                                detaJson.deviceState = lang_txt22
                            } else if (item.epData == "1") {
                                detaJson.deviceState = lang_txt20
                            } else if (item.epData == "2") {
                                detaJson.deviceState = lang_txt21
                            }
                        } else if (item.object.split(">")[2] == "Ar") {
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_Ar.png)"
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_Ar +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "setDeviceState.html";
                            if (item.epData == "2") {
                                detaJson.deviceState = lang_txt_open
                            } else if (item.epData == "3") {
                                detaJson.deviceState = lang_txt_close
                            } else {
                                detaJson.deviceState = lang_txt_stop
                            }
                        } else if (item.object.split(">")[2] == "Au") {
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_Au.png)"
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_Au +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "setDeviceState.html";
                            if (item.epData == "2") {
                                detaJson.deviceState = lang_txt_open
                            } else if (item.epData == "3") {
                                detaJson.deviceState = lang_txt_close
                            } else {
                                detaJson.deviceState = lang_txt_stop
                            }
                        } else if (item.object.split(">")[2] == "Aj") {
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_Aj.png)"
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_Aj +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "action_sceneTask_setSwitch.html";
                            var num = item.epData.length - 1;
                            for (var n = 0; n < num; n++) {
                                if (item.epData.substr(n + 1, 1) == 0) {
                                    detaJson.deviceState += (n + 1) + ":" + lang_switch_off + " ";
                                } else if (item.epData.substr(n + 1, 1) == 1) {
                                    detaJson.deviceState += (n + 1) + ":" + lang_switch_on + " ";
                                } else if (item.epData.substr(n + 1, 1) == 3) {
                                    detaJson.deviceState += (n + 1) + ":" + lang_switch_cut + " ";
                                }
                            }
                        } else if (item.object.split(">")[2] == "80") {
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_80.png)"
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_80 +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "curtain_80_sceneTask.html";
                            var deviceData = item.epData.substring(1, 4);
                            if (deviceData === "000") {
                                detaJson.deviceState = lang_txt_close
                            } else if (deviceData === "100") {
                                detaJson.deviceState = lang_txt_open
                            } else if (deviceData === "255") {
                                detaJson.deviceState = lang_txt_stop
                            } else {
                                detaJson.deviceState = Number(item.epData.substring(1, 4)) + "%";
                            }
                        } else if (item.object.split(">")[2] == "Co") {
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_Co.png)"
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_Co +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "curtain_80_sceneTask.html";
                            var deviceData = item.epData;
                            if (deviceData === "000") {
                                detaJson.deviceState = lang_txt_close
                            } else if (deviceData === "100") {
                                detaJson.deviceState = lang_txt_open
                            } else if (deviceData === "255") {
                                detaJson.deviceState = lang_txt_stop
                            } else {
                                detaJson.deviceState = Number(item.epData) + "%";
                            }
                        } else if (item.object.split(">")[2] == "At") {
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_At +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "action_sceneTask_setSwitch.html";
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_At.png)"
                            var num = item.epData.length - 1;
                            for (var n = 0; n < num; n++) {
                                if (item.epData.substr(n + 1, 1) == 0) {
                                    detaJson.deviceState += (n + 1) + ":" + lang_switch_off + " ";
                                } else if (item.epData.substr(n + 1, 1) == 1) {
                                    detaJson.deviceState += (n + 1) + ":" + lang_switch_on + " ";
                                } else if (item.epData.substr(n + 1, 1) == 3) {
                                    detaJson.deviceState += (n + 1) + ":" + lang_switch_cut + " ";
                                }
                            }
                        } else if (item.object.split(">")[2] == "Am") {
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_Am +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "action_sceneTask_setSwitch_lock.html";
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_Am.png)"
                            var num = item.epData.length;

                            if (item.epData.substr(0, 1) == "1") {
                                if (item.epData.substr(2, 1) == 0) {
                                    detaJson.deviceState += 1 + ":" + lang_switch_off + " ";
                                } else if (item.epData.substr(2, 1) == 1) {
                                    detaJson.deviceState += 1 + ":" + lang_switch_on + " ";
                                } else if (item.epData.substr(2, 1) == 3) {
                                    detaJson.deviceState += 1 + ":" + lang_switch_cut + " ";
                                }
                            } else {
                                for (var n = 1; n < num; n++) {
                                    if (item.epData.substr(n, 1) == 0) {
                                        detaJson.deviceState += (n) + ":" + lang_switch_off + " ";
                                    } else if (item.epData.substr(n, 1) == 1) {
                                        detaJson.deviceState += (n) + ":" + lang_switch_on + " ";
                                    } else if (item.epData.substr(n, 1) == 3) {
                                        detaJson.deviceState += (n) + ":" + lang_switch_cut + " ";
                                    }
                                }
                            }
                        } else if (item.object.split(">")[2] == "Ao") {
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_Ao +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "action_sceneTask_setSwitch_lock.html";
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_Ao.png)"
                            var num = item.epData.length;
                            if (item.epData.substr(0, 1) == "1") {
                                if (item.epData.substr(1, 1) == 0) {
                                    if (item.epData.substr(2, 1) == 0) {
                                        for (var m = 0; m < num; m++) {
                                            detaJson.deviceState += (m + 1) + ":" + lang_switch_off +
                                                " ";
                                        }
                                    } else if (item.epData.substr(2, 1) == 1) {
                                        for (var m = 0; m < num; m++) {
                                            detaJson.deviceState += (m + 1) + ":" + lang_switch_on +
                                                " ";
                                        }
                                    } else if (item.epData.substr(2, 1) == 3) {
                                        for (var m = 0; m < num; m++) {
                                            detaJson.deviceState += (m + 1) + ":" + lang_switch_cut +
                                                " ";
                                        }
                                    }
                                } else if (item.epData.substr(1, 1) == "1") {
                                    if (item.epData.substr(2, 1) == 0) {
                                        detaJson.deviceState += 1 + ":" + lang_switch_off + " ";
                                    } else if (item.epData.substr(2, 1) == 1) {
                                        detaJson.deviceState += 1 + ":" + lang_switch_on + " ";
                                    } else if (item.epData.substr(2, 1) == 3) {
                                        detaJson.deviceState += 1 + ":" + lang_switch_cut + " ";
                                    }
                                } else if (item.epData.substr(1, 1) == "2") {
                                    if (item.epData.substr(2, 1) == 0) {
                                        detaJson.deviceState += 2 + ":" + lang_switch_off + " ";
                                    } else if (item.epData.substr(2, 1) == 1) {
                                        detaJson.deviceState += 2 + ":" + lang_switch_on + " ";
                                    } else if (item.epData.substr(2, 1) == 3) {
                                        detaJson.deviceState += 2 + ":" + lang_switch_cut + " ";
                                    }
                                } else if (item.epData.substr(1, 1) == "3") {
                                    if (item.epData.substr(2, 1) == 0) {
                                        detaJson.deviceState += 3 + ":" + lang_switch_off + " ";
                                    } else if (item.epData.substr(2, 1) == 1) {
                                        detaJson.deviceState += 3 + ":" + lang_switch_on + " ";
                                    } else if (item.epData.substr(2, 1) == 3) {
                                        detaJson.deviceState += 3 + ":" + lang_switch_cut + " ";
                                    }
                                }
                            } else {
                                for (var n = 1; n < num; n++) {
                                    if (item.epData.substr(n, 1) == 0) {
                                        detaJson.deviceState += (n) + ":" + lang_switch_off + " ";
                                    } else if (item.epData.substr(n, 1) == 1) {
                                        detaJson.deviceState += (n) + ":" + lang_switch_on + " ";
                                    } else if (item.epData.substr(n, 1) == 3) {
                                        detaJson.deviceState += (n) + ":" + lang_switch_cut + " ";
                                    }
                                }
                            }
                        } else if (item.object.split(">")[2] == "An") {
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_An +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "action_sceneTask_setSwitch_lock.html";
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_An.png)"
                            var num = item.epData.length;
                            if (item.epData.substr(0, 1) == "1") {
                                if (item.epData.substr(1, 1) == "1") {
                                    if (item.epData.substr(2, 1) == 0) {
                                        detaJson.deviceState += 1 + ":" + lang_switch_off + " ";
                                    } else if (item.epData.substr(2, 1) == 1) {
                                        detaJson.deviceState += 1 + ":" + lang_switch_on + " ";
                                    } else if (item.epData.substr(2, 1) == 3) {
                                        detaJson.deviceState += 1 + ":" + lang_switch_cut + " ";
                                    }
                                } else if (item.epData.substr(1, 1) == "2") {
                                    if (item.epData.substr(2, 1) == 0) {
                                        detaJson.deviceState += 2 + ":" + lang_switch_off + " ";
                                    } else if (item.epData.substr(2, 1) == 1) {
                                        detaJson.deviceState += 2 + ":" + lang_switch_on + " ";
                                    } else if (item.epData.substr(2, 1) == 3) {
                                        detaJson.deviceState += 2 + ":" + lang_switch_cut + " ";
                                    }
                                }
                            } else {
                                for (var n = 1; n < num; n++) {
                                    if (item.epData.substr(n, 1) == 0) {
                                        detaJson.deviceState += (n) + ":" + lang_switch_off + " ";
                                    } else if (item.epData.substr(n, 1) == 1) {
                                        detaJson.deviceState += (n) + ":" + lang_switch_on + " ";
                                    } else if (item.epData.substr(n, 1) == 3) {
                                        detaJson.deviceState += (n) + ":" + lang_switch_cut + " ";
                                    }
                                }
                            }
                        }  else if (item.object.split(">")[2] == "61" || item.object.split(">")[2] == "62" ||
                            item.object.split(">")[2] == "63" || item.object.split(">")[2] == "64") {
                            var deviceNameList = {
                                "61":lang_name_61,
                                "62":lang_name_62,
                                "63":lang_name_63,
                                "64":lang_name_64
                            }
                            var deviceType = item.object.split(">")[2];
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? deviceNameList[deviceType] +
                                item.name.split("#")[2] : item.name
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_"+deviceType+".png)";
                            detaJson.editUrl = "action_sceneTask_setSwitch.html";
                            var num = item.epData.length;
                            for (var n = 0; n < num; n++) {
                                if (item.epData.substr(n, 1) == 0) {
                                    detaJson.deviceState += (n + 1) + ":" + lang_switch_off + " ";
                                } else if (item.epData.substr(n, 1) == 1) {
                                    detaJson.deviceState += (n + 1) + ":" + lang_switch_on + " ";
                                } else if (item.epData.substr(n, 1) == 3) {
                                    detaJson.deviceState += (n + 1) + ":" + lang_switch_cut + " ";
                                }
                            }
                        } else if (item.object.split(">")[2] == "Bu") {
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_Bu +
                                item.name.split("#")[2] : item.name;
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_Bu.png)";
                            detaJson.editUrl = "action_sceneTask_setSwitch_lock.html";
                            var num = item.epData.length;

                            if (item.epData.substr(0, 1) == "1") {
                                if (item.epData.substr(2, 1) == 0) {
                                    detaJson.deviceState += 1 + ":" + lang_switch_off + " ";
                                } else if (item.epData.substr(2, 1) == 1) {
                                    detaJson.deviceState += 1 + ":" + lang_switch_on + " ";
                                } else if (item.epData.substr(2, 1) == 3) {
                                    detaJson.deviceState += 1 + ":" + lang_switch_cut + " ";
                                }
                            } else {
                                for (var n = 1; n < num; n++) {
                                    if (item.epData.substr(n, 1) == 0) {
                                        detaJson.deviceState += (n) + ":" + lang_switch_off + " ";
                                    } else if (item.epData.substr(n, 1) == 1) {
                                        detaJson.deviceState += (n) + ":" + lang_switch_on + " ";
                                    } else if (item.epData.substr(n, 1) == 3) {
                                        detaJson.deviceState += (n) + ":" + lang_switch_cut + " ";
                                    }
                                }
                            }
                        } else if (item.object.split(">")[2] == "Bv") {
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_Bv +
                                item.name.split("#")[2] : item.name;
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_Bv.png)"
                            detaJson.editUrl = "action_sceneTask_setSwitch_lock.html";
                            var num = item.epData.length;
                            if (item.epData.substr(0, 1) == "1") {
                                if (item.epData.substr(1, 1) == "1") {
                                    if (item.epData.substr(2, 1) == 0) {
                                        detaJson.deviceState += 1 + ":" + lang_switch_off + " ";
                                    } else if (item.epData.substr(2, 1) == 1) {
                                        detaJson.deviceState += 1 + ":" + lang_switch_on + " ";
                                    } else if (item.epData.substr(2, 1) == 3) {
                                        detaJson.deviceState += 1 + ":" + lang_switch_cut + " ";
                                    }
                                } else if (item.epData.substr(1, 1) == "2") {
                                    if (item.epData.substr(2, 1) == 0) {
                                        detaJson.deviceState += 2 + ":" + lang_switch_off + " ";
                                    } else if (item.epData.substr(2, 1) == 1) {
                                        detaJson.deviceState += 2 + ":" + lang_switch_on + " ";
                                    } else if (item.epData.substr(2, 1) == 3) {
                                        detaJson.deviceState += 2 + ":" + lang_switch_cut + " ";
                                    }
                                }
                            } else {
                                for (var n = 1; n < num; n++) {
                                    if (item.epData.substr(n, 1) == 0) {
                                        detaJson.deviceState += (n) + ":" + lang_switch_off + " ";
                                    } else if (item.epData.substr(n, 1) == 1) {
                                        detaJson.deviceState += (n) + ":" + lang_switch_on + " ";
                                    } else if (item.epData.substr(n, 1) == 3) {
                                        detaJson.deviceState += (n) + ":" + lang_switch_cut + " ";
                                    }
                                }
                            }
                        } else if (item.object.split(">")[2] == "Bw") {
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_Bw +
                                item.name.split("#")[2] : item.name;
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_Bw.png)"
                            detaJson.editUrl = "action_sceneTask_setSwitch_lock.html";
                            var num = item.epData.length;
                            if (item.epData.substr(0, 1) == "1") {
                                if (item.epData.substr(1, 1) == 0) {
                                    if (item.epData.substr(2, 1) == 0) {
                                        for (var m = 0; m < num; m++) {
                                            detaJson.deviceState += (m + 1) + ":" + lang_switch_off +
                                                " ";
                                        }
                                    } else if (item.epData.substr(2, 1) == 1) {
                                        for (var m = 0; m < num; m++) {
                                            detaJson.deviceState += (m + 1) + ":" + lang_switch_on +
                                                " ";
                                        }
                                    } else if (item.epData.substr(2, 1) == 3) {
                                        for (var m = 0; m < num; m++) {
                                            detaJson.deviceState += (m + 1) + ":" + lang_switch_cut +
                                                " ";
                                        }
                                    }
                                } else if (item.epData.substr(1, 1) == "1") {
                                    if (item.epData.substr(2, 1) == 0) {
                                        detaJson.deviceState += 1 + ":" + lang_switch_off + " ";
                                    } else if (item.epData.substr(2, 1) == 1) {
                                        detaJson.deviceState += 1 + ":" + lang_switch_on + " ";
                                    } else if (item.epData.substr(2, 1) == 3) {
                                        detaJson.deviceState += 1 + ":" + lang_switch_cut + " ";
                                    }
                                } else if (item.epData.substr(1, 1) == "2") {
                                    if (item.epData.substr(2, 1) == 0) {
                                        detaJson.deviceState += 2 + ":" + lang_switch_off + " ";
                                    } else if (item.epData.substr(2, 1) == 1) {
                                        detaJson.deviceState += 2 + ":" + lang_switch_on + " ";
                                    } else if (item.epData.substr(2, 1) == 3) {
                                        detaJson.deviceState += 2 + ":" + lang_switch_cut + " ";
                                    }
                                } else if (item.epData.substr(1, 1) == "3") {
                                    if (item.epData.substr(2, 1) == 0) {
                                        detaJson.deviceState += 3 + ":" + lang_switch_off + " ";
                                    } else if (item.epData.substr(2, 1) == 1) {
                                        detaJson.deviceState += 3 + ":" + lang_switch_on + " ";
                                    } else if (item.epData.substr(2, 1) == 3) {
                                        detaJson.deviceState += 3 + ":" + lang_switch_cut + " ";
                                    }
                                }
                            } else {
                                for (var n = 1; n < num; n++) {
                                    if (item.epData.substr(n, 1) == 0) {
                                        detaJson.deviceState += (n) + ":" + lang_switch_off + " ";
                                    } else if (item.epData.substr(n, 1) == 1) {
                                        detaJson.deviceState += (n) + ":" + lang_switch_on + " ";
                                    } else if (item.epData.substr(n, 1) == 3) {
                                        detaJson.deviceState += (n) + ":" + lang_switch_cut + " ";
                                    }
                                }
                            }
                        } else if (item.object.split(">")[2] == "Cl") {
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_Cl +
                                item.name.split("#")[2] : item.name;
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_Cl.png)";
                            detaJson.editUrl = "action_sceneTask_setSwitch_lock.html";
                            var num = item.epData.length;

                            if (item.epData.substr(0, 1) == "1") {
                                if (item.epData.substr(2, 1) == 0) {
                                    detaJson.deviceState += 1 + ":" + lang_switch_off + " ";
                                } else if (item.epData.substr(2, 1) == 1) {
                                    detaJson.deviceState += 1 + ":" + lang_switch_on + " ";
                                } else if (item.epData.substr(2, 1) == 3) {
                                    detaJson.deviceState += 1 + ":" + lang_switch_cut + " ";
                                }
                            } else {
                                for (var n = 1; n < num; n++) {
                                    if (item.epData.substr(n, 1) == 0) {
                                        detaJson.deviceState += (n) + ":" + lang_switch_off + " ";
                                    } else if (item.epData.substr(n, 1) == 1) {
                                        detaJson.deviceState += (n) + ":" + lang_switch_on + " ";
                                    } else if (item.epData.substr(n, 1) == 3) {
                                        detaJson.deviceState += (n) + ":" + lang_switch_cut + " ";
                                    }
                                }
                            }
                        } else if (item.object.split(">")[2] == "Cm") {
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_Cm +
                                item.name.split("#")[2] : item.name;
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_Cm.png)"
                            detaJson.editUrl = "action_sceneTask_setSwitch_lock.html";
                            var num = item.epData.length;
                            if (item.epData.substr(0, 1) == "1") {
                                if (item.epData.substr(1, 1) == "1") {
                                    if (item.epData.substr(2, 1) == 0) {
                                        detaJson.deviceState += 1 + ":" + lang_switch_off + " ";
                                    } else if (item.epData.substr(2, 1) == 1) {
                                        detaJson.deviceState += 1 + ":" + lang_switch_on + " ";
                                    } else if (item.epData.substr(2, 1) == 3) {
                                        detaJson.deviceState += 1 + ":" + lang_switch_cut + " ";
                                    }
                                } else if (item.epData.substr(1, 1) == "2") {
                                    if (item.epData.substr(2, 1) == 0) {
                                        detaJson.deviceState += 2 + ":" + lang_switch_off + " ";
                                    } else if (item.epData.substr(2, 1) == 1) {
                                        detaJson.deviceState += 2 + ":" + lang_switch_on + " ";
                                    } else if (item.epData.substr(2, 1) == 3) {
                                        detaJson.deviceState += 2 + ":" + lang_switch_cut + " ";
                                    }
                                }
                            } else {
                                for (var n = 1; n < num; n++) {
                                    if (item.epData.substr(n, 1) == 0) {
                                        detaJson.deviceState += (n) + ":" + lang_switch_off + " ";
                                    } else if (item.epData.substr(n, 1) == 1) {
                                        detaJson.deviceState += (n) + ":" + lang_switch_on + " ";
                                    } else if (item.epData.substr(n, 1) == 3) {
                                        detaJson.deviceState += (n) + ":" + lang_switch_cut + " ";
                                    }
                                }
                            }
                        } else if (item.object.split(">")[2] == "Cn") {
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_Cn +
                                item.name.split("#")[2] : item.name;
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_Cn.png)"
                            detaJson.editUrl = "action_sceneTask_setSwitch_lock.html";
                            var num = item.epData.length;
                            if (item.epData.substr(0, 1) == "1") {
                                if (item.epData.substr(1, 1) == 0) {
                                    if (item.epData.substr(2, 1) == 0) {
                                        for (var m = 0; m < num; m++) {
                                            detaJson.deviceState += (m + 1) + ":" + lang_switch_off +
                                                " ";
                                        }
                                    } else if (item.epData.substr(2, 1) == 1) {
                                        for (var m = 0; m < num; m++) {
                                            detaJson.deviceState += (m + 1) + ":" + lang_switch_on +
                                                " ";
                                        }
                                    } else if (item.epData.substr(2, 1) == 3) {
                                        for (var m = 0; m < num; m++) {
                                            detaJson.deviceState += (m + 1) + ":" + lang_switch_cut +
                                                " ";
                                        }
                                    }
                                } else if (item.epData.substr(1, 1) == "1") {
                                    if (item.epData.substr(2, 1) == 0) {
                                        detaJson.deviceState += 1 + ":" + lang_switch_off + " ";
                                    } else if (item.epData.substr(2, 1) == 1) {
                                        detaJson.deviceState += 1 + ":" + lang_switch_on + " ";
                                    } else if (item.epData.substr(2, 1) == 3) {
                                        detaJson.deviceState += 1 + ":" + lang_switch_cut + " ";
                                    }
                                } else if (item.epData.substr(1, 1) == "2") {
                                    if (item.epData.substr(2, 1) == 0) {
                                        detaJson.deviceState += 2 + ":" + lang_switch_off + " ";
                                    } else if (item.epData.substr(2, 1) == 1) {
                                        detaJson.deviceState += 2 + ":" + lang_switch_on + " ";
                                    } else if (item.epData.substr(2, 1) == 3) {
                                        detaJson.deviceState += 2 + ":" + lang_switch_cut + " ";
                                    }
                                } else if (item.epData.substr(1, 1) == "3") {
                                    if (item.epData.substr(2, 1) == 0) {
                                        detaJson.deviceState += 3 + ":" + lang_switch_off + " ";
                                    } else if (item.epData.substr(2, 1) == 1) {
                                        detaJson.deviceState += 3 + ":" + lang_switch_on + " ";
                                    } else if (item.epData.substr(2, 1) == 3) {
                                        detaJson.deviceState += 3 + ":" + lang_switch_cut + " ";
                                    }
                                }
                            } else {
                                for (var n = 1; n < num; n++) {
                                    if (item.epData.substr(n, 1) == 0) {
                                        detaJson.deviceState += (n) + ":" + lang_switch_off + " ";
                                    } else if (item.epData.substr(n, 1) == 1) {
                                        detaJson.deviceState += (n) + ":" + lang_switch_on + " ";
                                    } else if (item.epData.substr(n, 1) == 3) {
                                        detaJson.deviceState += (n) + ":" + lang_switch_cut + " ";
                                    }
                                }
                            }
                        } else if (item.object.split(">")[2] == "D8") {
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_D8.png)"
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_D8 +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "D8VoiceOrLight.html?Task=sceneTask";
                            var mode = item.epData.substring(0, 3)
                            var mode_1 = item.epData.substring(3, 5)
                            var voiceOrLight = item.epData.substring(0, 1)
                            var deviceState;
                            if (mode == "301") {
                                deviceState = lang_D8_voice1
                            } else if (mode == "302") {
                                deviceState = lang_D8_voice2
                            } else if (mode == "303") {
                                deviceState = lang_D8_voice3
                            } else if (mode == "304") {
                                deviceState = lang_D8_voice4
                            } else if (mode == "305") {
                                deviceState = lang_D8_voice5
                            } else if (mode == "306") {
                                deviceState = lang_D8_voice6
                            }
                            if (mode == "101") {
                                deviceState = lang_D8_color1
                            } else if (mode == "105") {
                                deviceState = lang_D8_color2
                            } else if (mode == "106") {
                                deviceState = lang_D8_color3
                            } else if (mode == "103") {
                                deviceState = lang_D8_color4
                            } else if (mode == "102") {
                                deviceState = lang_D8_color5
                            } else if (mode == "107") {
                                deviceState = lang_D8_color6
                            }
                            if(voiceOrLight == "1"){
                                if (mode_1 == "00") {
                                    deviceState = lang_D8_mode1;
                                } else if (mode_1 == "01") {
                                    deviceState = lang_D8_mode2 + " " + deviceState;
                                } else if (mode_1 == "02") {
                                    deviceState = lang_D8_mode3 + " " + deviceState;
                                } else if (mode_1 == "03") {
                                    deviceState = lang_D8_mode4 + " " + deviceState;
                                } else if (mode_1 == "04") {
                                    deviceState = lang_D8_mode5 + " " + deviceState;
                                }
                            }else if(voiceOrLight == "3"){
                                deviceState = deviceState + " " + parseInt(mode_1) + "%";
                            }
                            detaJson.deviceState = deviceState;
                        } else if (item.object.split(">")[2] == "Ai") {
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_Ai.png)"
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_Ai +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "setDeviceState.html";
                            if (item.epData == "10") {
                                detaJson.deviceState = lang_switch_off
                            } else if (item.epData == "11") {
                                detaJson.deviceState = lang_switch_on
                            } else {
                                detaJson.deviceState = lang_switch_cut
                            }
                        } else if (item.object.split(">")[2] == "77") {
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_77.png)"
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_77 +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "setDeviceState.html";
                            if (item.epData == "10") {
                                detaJson.deviceState = lang_switch_off
                            } else {
                                detaJson.deviceState = lang_switch_on
                            }
                        } else if (item.object.split(">")[2] == "12") {
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_12.png)"
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_12 +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "device_12_sceneTask.html";
                            detaJson.deviceState = Number(item.epData) + "%";
                            if (Number(item.epData) == 0) {
                                detaJson.switchName = lang_switch_off;
                            } else {
                                detaJson.switchName = lang_switch_on;
                            }
                        } else if (item.object.split(">")[2] == "81") {
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_81.png)"
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_81 +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "switch_At_sceneTask.html";
                            var deviceData = item.epData;
                            if (deviceData.substr(0, 1) == '9') {
                                if (deviceData.substr(5, 3) == "000") {
                                    detaJson.deviceState = "2:" + lang_closeSingle;
                                } else if (deviceData.substr(5, 3) == "100") {
                                    detaJson.deviceState = "2:" + lang_openSingle;
                                } else if (deviceData.substr(5, 3) == "255") {
                                    detaJson.deviceState = "2:" + lang_stopSingle;
                                } else {
                                    detaJson.deviceState = "2:" + Number(deviceData.substr(5, 3)) + "%";
                                }
                            } else if (deviceData.substr(4, 1) == '9') {
                                if (deviceData.substr(1, 3) == "000") {
                                    detaJson.deviceState = "1:" + lang_closeSingle;
                                } else if (deviceData.substr(1, 3) == "100") {
                                    detaJson.deviceState = "1:" + lang_openSingle;
                                } else if (deviceData.substr(1, 3) == "255") {
                                    detaJson.deviceState = "1:" + lang_stopSingle;
                                } else {
                                    detaJson.deviceState = "1:" + Number(deviceData.substr(1, 3)) + "%";
                                }
                            } else if (deviceData.substr(0, 1) != '9' && deviceData.substr(4, 1) != '9') {
                                if (deviceData.substr(5, 3) == "000" || deviceData.substr(1, 3) ==
                                    "000") {
                                    detaJson.deviceState = "1:" + lang_closeSingle + " 2:" +
                                        lang_closeSingle;
                                } else if (deviceData.substr(5, 3) == "100" || deviceData.substr(1, 3) ==
                                    "000") {
                                    detaJson.deviceState = "1:" + lang_openSingle + " 2:" +
                                        lang_openSingle;
                                } else if (deviceData.substr(5, 3) == "255" || deviceData.substr(1, 3) ==
                                    "000") {
                                    detaJson.deviceState = "1:" + lang_stopSingle + " 2:" +
                                        lang_stopSingle;
                                }
                            }
                        } else if (item.object.split(">")[2] == "A5") {
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_A5.png)"
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_A5 +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "setDeviceState.html";
                            if (item.epData == "0") {
                                detaJson.deviceState = lang_txt18
                            } else {
                                detaJson.deviceState = lang_txt19
                            }
                        } else if (item.object.split(">")[2] == "65") {
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_65 +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "setDeviceState.html";
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_65.png)"
                            if (item.epData == "2") {
                                detaJson.deviceState = lang_txt_open;
                            } else if (item.epData == "3") {
                                detaJson.deviceState = lang_txt_close;
                            } else if (item.epData == "1") {
                                detaJson.deviceState = lang_txt_stop;
                            }
                        } else if (item.object.split(">")[2] == "A6") {
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_A6.png)"
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_A6 +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "setDeviceState.html";
                            if (item.epData == "11") {
                                detaJson.deviceState = lang_play;
                            }
                        } else if (item.object.split(">")[2] == "Bh") {
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_Bh.png)"
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_Bh +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "switch_At_sceneTask.html";
                            var epDataBh = item.epData.substr(1,2);
                            for (var g = 0; g < epDataBh.length; g++) {
                                var state = epDataBh[g];
                                if (state === "1") {
                                    detaJson.deviceState += ((g == 0) ? "1:" : " 2:") + lang_stopSingle;
                                } else if (state === "2") {
                                    detaJson.deviceState += ((g == 0) ? "1:" : " 2:") + lang_openSingle
                                } else if (state === "3") {
                                    detaJson.deviceState += ((g == 0) ? "1:" : " 2:") + lang_closeSingle
                                }
                            }
                        } else if (item.object.split(">")[2] == "Av") {
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_Av.png)"
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_Av +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "device_Av_sceneTask.html";
                            if (item.epData == "20") {
                                detaJson.switchName = lang_switch_off;
                                detaJson.deviceState = "0%";
                            } else {
                                detaJson.switchName = lang_switch_on;
                                detaJson.deviceState = Number(item.epData.substring(1)) + "%";
                            }
                        } else if (item.object.split(">")[2] == "Ap") {
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_Ap.png)"
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_Ap +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "device_Ap_sceneTask.html";
                            var state = item.epData.substr(0, 2);
                            var temp = item.epData.substr(4, 4);
                            if (state == "20") {
                                detaJson.switchName = lang_txt_close;
                            } else {
                                detaJson.switchName = lang_txt_open;
                                temp = parseInt(temp) / 100;
                                detaJson.deviceState = '' + temp + '℃';
                            }
                        } else if (item.object.split(">")[2] == "Bm") {
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_Bm.png)"
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_Bm +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "device_Bm_sceneTask.html";
                            var state = item.epData.substr(0, 4);
                            var temp = item.epData.substr(7, 4);
                            if (state == "0100") {
                                detaJson.switchName = lang_txt_close;
                            } else {
                                detaJson.switchName = lang_txt_open;
                                temp = parseInt(temp, 16) / 10;
                                detaJson.deviceState = '' + temp + '℃';
                            }
                        } else if (item.object.split(">")[2] == "Oi") {
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_Oi.png)"
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_Oi +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "device_Oi_sceneTask.html";
                            //09aabbccddeeeeffgghh09：长度，aa:开关，bb：模式，cc：温度，dd：湿度，eeee:风向，ff：风量，gg:换气模式，hh:辅热）备注：当某一设置项缺省时，填 0xFF。
                            var state = item.epData.substr(14, 2);
                            var bb = item.epData.substr(16, 2);
                            var cc = item.epData.substr(18, 2);
                            var ee = item.epData.substr(24, 2);
                            var ff = item.epData.substr(26, 2);
                            if (bb == "01") {
                                bb = languageUtil.getResource("houseKeeper1_Oi_Type1") //"制冷";
                            } else if (bb == "02") {
                                bb = languageUtil.getResource("houseKeeper1_Oi_Type2") //"制re";
                            } else if (bb == "03") {
                                bb = languageUtil.getResource("houseKeeper1_Oi_Type3") //"";
                            } else if (bb == "05") {
                                bb = languageUtil.getResource("houseKeeper1_Oi_Type4") //"制冷";
                            } else {
                                bb = "";
                            }
                            if (cc == "FF") {
                                cc = "";
                            }
                            if (ee == "00") {
                                ee = languageUtil.getResource("houseKeeper1_Oi_Speed4");
                            } else {
                                ee = "";
                            }
                            if (ff == "00") {
                                ff = languageUtil.getResource("houseKeeper1_Oi_Speed4");
                            } else {
                                ff = "";
                            }
                            if (state == "00") {
                                detaJson.deviceState = lang_txt_close;
                            } else {
                                detaJson.deviceState = lang_txt_open;
                            }
                        } else if (item.object.split(">")[2] == "82") {
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_82.png)"
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_82 +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "device_82_sceneTask.html";
                            var result = item.epData.split(",");
                            var state;
                            for (var l = 0; l < result.length; l++) {
                                if (result[l].substr(0, 1) == "2") {
                                    state = result[l].substr(1, 1);
                                } else if (result[l].substr(0, 1) == "23") {

                                } else if (result[l].substr(0, 1) == "4") {

                                }
                            }
                            if (state == "0") {
                                detaJson.deviceState = lang_txt_close;
                            } else {
                                detaJson.deviceState = lang_txt_open;
                            }
                        } else if (item.object.split(">")[2] == "16") {
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_16.png)"
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_16 +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "setDeviceState.html";
                            if (item.epData == "0") {
                                detaJson.deviceState = lang_switch_off
                            } else {
                                detaJson.deviceState = lang_switch_on
                            }
                        } else if (item.object.split(">")[2] == "25") {
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_25.png)"
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_25 +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "setDeviceState.html";
                            if (item.epData == "3") {
                                detaJson.deviceState = lang_txt_close
                            } else if (item.epData == "2") {
                                detaJson.deviceState = lang_txt_open
                            }
                        } else if (item.object.split(">")[2] == "D7") {
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_D7.png)";
                            detaJson.editUrl = "device_D7_sceneTask.html";
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_D7 +
                                item.name.split("#")[2] : item.name
                            if (item.epData.length == 10) {
                                var mode = item.epData.substr(9, 1);
                                if (mode == 0) {
                                    detaJson.deviceState = "OFF";
                                } else if (mode == 1) {

                                } else if (mode == 2) {
                                    detaJson.deviceState = lang_D7_mode_dinner;
                                } else if (mode == 3) {
                                    detaJson.deviceState = lang_D7_mode_moon;
                                } else if (mode == 4) {
                                    detaJson.deviceState = lang_D7_mode_blue;
                                } else if (mode == 5) {
                                    detaJson.deviceState = lang_D7_mode_green;
                                }
                            } else if (item.epData.indexOf(",") > 0) {
                                var result = item.epData.split(",");
                                if (result[0].length == 18 && result[1].length == 12) {
                                    detaJson.switchName = lang_D7_rgb + result[0].substr(10, 6);
                                    detaJson.deviceState = lang_D7_light + parseInt(result[1].substr(8,
                                        2), 16).toString() + "%"
                                }
                            }
                        } else if (item.object.split(">")[2] == "D9") {
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_D9.png)"
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_D9 +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "device_D9_sceneTask.html";
                            var result = item.epData.split(",");
                            var state = '';
                            var vol = '';
                            for (var l = 0; l < result.length; l++) {
                                if (result[l].substr(0, 1) == "1") {
                                    state = languageUtil.getResource("Radio_houseKeeper_play");
                                } else if (result[l].substr(0, 1) == "3") {
                                    var stateStr = result[l].substr(1, 1);
                                    state = (stateStr == '0') ? languageUtil.getResource("Radio_houseKeeper_play") :
                                        languageUtil.getResource("Radio_houseKeeper_stop");
                                } else if (result[l].substr(0, 1) == "4") {
                                    vol = result[l].substr(1, result[l].length - 1) + '%';
                                }
                                detaJson.deviceState = state + " " + vol;
                            }
                        } else if (item.object.split(">")[2] == "DD") {
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_DD.png)"
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_DD +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "device_DD_sceneTask.html";

                            var arr = item.epData.split(',');
                            var state = item.epData.substr(0, 1);
                            var voice1 = '',
                                voice2 = '',
                                voice3 = '',
                                voice4 = '';
                            for (var ii = 1; ii < arr.length; ii++) {
                                var s = arr[ii].substr(0, 1);
                                var v = arr[ii].substring(1);
                                switch (s) {
                                    case '1':
                                        voice1 = lang_DD_1 + v;
                                        break;
                                    case '2':
                                        voice2 = lang_DD_2 + v;
                                        break;
                                    case '3':
                                        voice3 = lang_DD_3 + v;
                                        break;
                                    case '4':
                                        voice4 = lang_DD_4 + v;
                                        break;
                                }
                            }
                            var voiceStr = voice1 + ' ' + voice2 + ' ' + voice3 + ' ' + voice4;
                            if (state == "1") {
                                // 暂停
                                detaJson.deviceState = lang_DD_stop;
                            } else {
                                // 播放
                                detaJson.deviceState = lang_DD_play + ' ' + voiceStr;
                            }
                        } else if (item.object.split(">")[2] == "OF") {
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_OF.png)"
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_OF +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "device_OF.html";
                            var a = item.epData.split(',');
                            if (a[0] != '') {
                                if (a[0] == '0') {
                                    // 暂停
                                    detaJson.switchName = languageUtil.getResource("clothes_hanger_time_out");
                                } else if (a[0] == '1') {
                                    // 上升
                                    detaJson.switchName = languageUtil.getResource("clothes_hanger_up")
                                } else {
                                    // 下降
                                    detaJson.switchName = languageUtil.getResource("clothes_hanger_decline")
                                }
                            } else if (a[3] != '') {
                                if (a[3] == '1') {
                                    // 照明开
                                    detaJson.switchName = languageUtil.getResource("clothes_hanger_light") + ': ' +
                                        languageUtil.getResource("clothes_hanger_open")
                                } else {
                                    // 照明关
                                    detaJson.switchName = languageUtil.getResource("clothes_hanger_light") + ': ' +
                                        languageUtil.getResource("clothes_hanger_close")
                                }
                            } else if (a[4] != '') {
                                if (a[4].substr(0, 1) == '0') {
                                    // 风干关
                                    detaJson.switchName = languageUtil.getResource("clothes_hanger_Air_dry") + ': ' +
                                        languageUtil.getResource("clothes_hanger_close")
                                } else {
                                    // 风干开
                                    var time = parseInt(a[4].substr(1, 3));
                                    var hour = parseInt(time / 60);
                                    var min = time % 60;
                                    var timeText = '';
                                    if (time < 60) {
                                        timeText = min + languageUtil.getResource("clothes_hanger_mine")
                                    } else {
                                        timeText = hour + languageUtil.getResource("clothes_hanger_hour") +
                                            min + languageUtil.getResource("clothes_hanger_mine")
                                    }
                                    detaJson.switchName = languageUtil.getResource("clothes_hanger_Air_dry") + ': ' +
                                        timeText
                                }
                            } else if (a[5] != '') {
                                if (a[5].substr(0, 1) == '0') {
                                    // 烘干关
                                    detaJson.switchName = languageUtil.getResource("clothes_hanger_drying") + ': ' +
                                        languageUtil.getResource("clothes_hanger_close")
                                } else {
                                    // 烘干开
                                    var time = parseInt(a[5].substr(1, 3));
                                    var hour = parseInt(time / 60);
                                    var min = time % 60;
                                    var timeText = '';
                                    if (time < 60) {
                                        timeText = min + languageUtil.getResource("clothes_hanger_mine")
                                    } else {
                                        timeText = hour + languageUtil.getResource("clothes_hanger_hour") +
                                            min + languageUtil.getResource("clothes_hanger_mine")
                                    }
                                    detaJson.switchName = languageUtil.getResource("clothes_hanger_drying") + ': ' +
                                        timeText
                                }
                            } else {
                                if (a[6] == '') {
                                    // 杀菌关
                                    detaJson.switchName = languageUtil.getResource("clothes_hanger_Disinfection") + ': ' +
                                        languageUtil.getResource("clothes_hanger_close")
                                } else if (a[6].substr(0, 1) == '0') {
                                    // 杀菌关
                                    detaJson.switchName = languageUtil.getResource(
                                            "clothes_hanger_Disinfection") + ': ' +
                                        languageUtil.getResource("clothes_hanger_close")
                                } else {
                                    // 杀菌开
                                    var time = parseInt(a[5].substr(1, 3));
                                    detaJson.switchName = languageUtil.getResource("clothes_hanger_Disinfection")
                                        + ': ' + time + languageUtil.getResource("clothes_hanger_mine")
                                }
                            }
                        } else if (item.object.split(">")[2] == "90") {
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_90 +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "setColorfulLight_90.html";
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_90.png)"
                            if (item.epData.length > 0) {
                                var result = item.epData.split(",");
                                var state = '';
                                for (var l = 0; l < result.length; l++) {
                                    if (result[l].substr(0, 1) == "1") {
                                        var rgb = result[l].substr(1, result[l].length);
                                        var r = parseInt(rgb.substr(0, 3)).toString(16).toUpperCase();
                                        var g = parseInt(rgb.substr(3, 3)).toString(16).toUpperCase();
                                        var b = parseInt(rgb.substr(6, 3)).toString(16).toUpperCase();
                                        state += rgb_str + "#" + (r.length < 2 ? "0" + r : r) +
                                            (g.length < 2 ? "0" + g : g) + (b.length < 2 ? "0" + b : b);
                                    } else if (result[l].substr(0, 1) == "2") {
                                        var light = result[l].substr(1, 3)
                                        if (parseInt(light) > 0) {
                                            state += " " + light_str +
                                                Math.round(parseInt(result[l].substr(1, 3)) / 255.0 * 100) + "%";
                                        }
                                    } else if (result[l].substr(0, 1) == "3") {
                                        var ms = parseInt(result[l].substr(1, 5));
                                        state += " " + LEDlight_90_Interval + parseInt(ms / 1000) + "s " +
                                            parseInt(ms % 1000) + "ms";
                                    } else if (result[l].substr(0, 1) == "9") {
                                        state += LEDlight_90_Colorful;
                                    } else if (result[l].substr(0, 1) == "D") {
                                        var light = result[l].substr(1, 3);
                                        if (parseInt(light) == 0) {
                                            state += "OFF";
                                        } else {
                                            state += LEDlight_90_sunlight + " " + light_str +
                                                Math.round(parseInt(result[l].substr(1, 3)) / 255.0 * 100) + "%";
                                        }
                                    }
                                    detaJson.deviceState = state;
                                }
                            }
                        } else if (item.object.split(">")[2] == "Aw") {
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_Aw.png)";
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? device_name_Aw +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "setDeviceState.html";
                            if (item.epData == "10") {
                                detaJson.deviceState = lang_switch_off
                            } else if (item.epData == "11") {
                                detaJson.deviceState = lang_switch_on
                            } else if (item.epData == "13") {
                                detaJson.deviceState = lang_switch_cut
                            } else if (item.epData == "50") {
                                detaJson.deviceState = aw_bell_short
                            } else if (item.epData == "510") {
                                detaJson.deviceState = aw_bell_stop
                            } else if (item.epData == "511") {
                                detaJson.deviceState = aw_bell_long
                            }
                        } else if (item.object.split(">")[2] == "Ax") {
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? device_name_Ax +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "chooseChildSwitch.html?viewType=scene";
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_Ax.png)";
                            if (item.epData == "1022" || item.epData == "1202" || item.epData == "1220") {
                                detaJson.deviceState = lang_switch_off
                            } else if (item.epData == "1122" || item.epData == "1212" || item.epData == "1221") {
                                detaJson.deviceState = lang_switch_on
                            } else {
                                detaJson.deviceState = lang_switch_cut
                            }
                            detaJson.switchName = device_switch + item.object.split(">")[1]
                        } else if (item.object.split(">")[2] == "Ba") {
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? device_name_Ba +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "device_Ba.html";
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_Ba.png)"
                            if (item.epData.length > 2) {
                                var result = item.epData;
                                var switch1 = result.substring(1, 2);
                                var switch2 = result.substring(2, 3);
                                var state = '';
                                if (switch1 == "0") {
                                    state += device_Ba_SocketName + "1" + "&nbsp;&nbsp;&nbsp;&nbsp;" + device_Ba_PowerFailure;
                                } else if (switch1 == "1") {
                                    state += device_Ba_SocketName + "1" + "&nbsp;&nbsp;&nbsp;&nbsp;" + device_Ba_Electricity;
                                }
                                if (switch2 == "0") {
                                    state += device_Ba_SocketName + "2" + "&nbsp;&nbsp;&nbsp;&nbsp;" + device_Ba_PowerFailure;
                                } else if (switch2 == "1") {
                                    state += device_Ba_SocketName + "2" + "&nbsp;&nbsp;&nbsp;&nbsp;" + device_Ba_Electricity;
                                }
                                detaJson.deviceState = state;
                            }
                        } else if (item.object.split(">")[2] == "22") {
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_22 +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "javascript:;";
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_22.png)"
                            if (item.description != undefined && item.description.length > 0) {
                                detaJson.deviceState = item.description;
                                detaJson.description = item.description;
                            }
                        } else if (item.object.split(">")[2] == "23") {
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_23 +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "javascript:;";
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_23.png)"
                            if (item.description != undefined && item.description.length > 0) {
                                detaJson.deviceState = item.description;
                                detaJson.description = item.description;
                            }
                        } else if (item.object.split(">")[2] == "Oj") {
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_Oj +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "device_Oj.html";
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_Oj.png)"
                            var a = item.epData.split(',');
                            if (a[0] == '0') {
                                detaJson.deviceState = languageUtil.getResource("airsystem_Oj_close");
                            } else if (a[1] != '') {
                                var text = 'AUTO';
                                if (a[1] == '01') {
                                    text = languageUtil.getResource("airsystem_Oj_Wind_speed_low");
                                } else if (a[1] == '02') {
                                    text = languageUtil.getResource("airsystem_Oj_Wind_speed_medium");
                                } else if (a[1] == '03') {
                                    text = languageUtil.getResource("airsystem_Oj_Wind_speed_high");
                                }
                                detaJson.deviceState = languageUtil.getResource("airsystem_Oj_Wind_speed_02") + text;
                                if (a[2] != '') {
                                    var text_type = languageUtil.getResource("airsystem_Oj_mode_Ventilation");
                                    if (a[2] == '01') {
                                        text_type = languageUtil.getResource("airsystem_Oj_mode_Ventilation");
                                    } else if (a[2] == '02') {
                                        text_type = languageUtil.getResource("airsystem_Oj_mode_Exhaust");
                                    }
                                    detaJson.deviceState = text_type + " " + languageUtil.getResource("airsystem_Oj_Wind_speed_02") + text;
                                }
                            } else if (a[1] == "") {
                                if (a[2] != '') {
                                    var text_type = languageUtil.getResource("airsystem_Oj_mode_Ventilation");
                                    if (a[2] == '03') {
                                        text_type = languageUtil.getResource("airsystem_Oj_mode_smart");
                                    } else if (a[2] == '04') {
                                        text_type = languageUtil.getResource("airsystem_Oj_mode_strong");
                                    } else if (a[2] == '05') {
                                        text_type = languageUtil.getResource(
                                            "airsystem_Oj_mode_Power_saving");
                                    }
                                    detaJson.deviceState = text_type;
                                }
                            }
                        } else if (item.object.split(">")[2] == "Be") {
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? device_name_Be +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "device_Be.html";
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_Be.png)"
                            if (item.epData.length > 1) {
                                var result = item.epData;
                                var type = result.substring(0, 2);
                                var state = "";
                                if (type == "40") {
                                    state += switch_off;
                                } else if (type == "41") {
                                    state += switch_on;
                                } else if (type == "43") {
                                    state += lang_switch_cut;
                                } else {
                                    var light = result.substring(1, 4);
                                    state += switch_on + "&nbsp;&nbsp;&nbsp;&nbsp;" + lang_D7_light +
                                        parseInt(light) + "%"
                                }
                                detaJson.deviceState = state;
                            }
                        } else if (item.object.split(">")[2] == "OZ") {
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_OZ +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "device_OZ_01.html";
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_OZ.png)"
                            var modeList = {
                                "01": lang_OZ_Type1,
                                "02": lang_OZ_Type2,
                                "03": lang_OZ_Type3,
                                "04": lang_OZ_Type4,
                                "05": lang_OZ_Type5,
                                "06": lang_OZ_Type6,
                                "07": lang_OZ_Type7,
                                "08": lang_OZ_Type8,
                                "09": lang_OZ_Type9,
                                "10": lang_OZ_Type10,
                                "11": lang_OZ_Type11,
                                "12": lang_OZ_Type12
                            };
                            if (item.description && item.description.length > 0) {
                                detaJson.description = item.description;
                            }
                            var nameArr = detaJson.description.split("-");
                            var epDataList = item.epData.split(",");
                            console.log(epDataList);
                            for (var k = 0; k < epDataList.length; k++) {
                                //510126FF000401FFFF
                                //123:开 制冷 26℃ 4 低,8:开 制冷 26℃ 4 低
                                console.log(epDataList);
                                var onOff = epDataList[k].substr(2, 1) === "0" ? lang_close : lang_open;
                                if (epDataList[k].substr(2, 1) === "0") {
                                    if (k === 0) {
                                        detaJson.deviceState = nameArr[k] + ":" + onOff
                                    } else {
                                        detaJson.deviceState += "," + nameArr[k] + ":" + onOff
                                    }
                                } else {
                                    var mode1 = " " + modeList[epDataList[k].substr(3, 2)];
                                    console.log(mode1);
                                    var temp1 = " " + parseInt(epDataList[k].substr(5, 3)) + "℃";
                                    console.log(temp1)
                                    if (k === 0) {
                                        detaJson.deviceState = nameArr[k] + ":" + onOff + mode1 + temp1
                                    } else {
                                        detaJson.deviceState += "," + nameArr[k] + ":" + onOff + mode1 +
                                            temp1
                                    }
                                }
                            }
                        } else if (item.object.split(">")[2] == "a0") {
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_a0 +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "device_a0_01.html";
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_a0_01.png)"
                            var modeList = {
                                "0": lang_a0_Type1,
                                "1": lang_a0_Type2,
                                "2": lang_a0_Type3,
                                "7": lang_a0_Type4
                            };
                            if (item.description && item.description.length > 0) {
                                detaJson.description = item.description;
                            }
                            var nameArr = detaJson.description.split("-");
                            var epDataList = item.epData.split(",");
                            console.log(epDataList);
                            for (var k = 0; k < epDataList.length; k++) { //01 1 1 26 1 //1:开 1:制冷 26:温度 1 低
                                console.log(epDataList);
                                var onOff = epDataList[k].substr(2, 1) === "0" ? lang_close : lang_open;
                                if (epDataList[k].substr(2, 1) === "0") {
                                    if (k === 0) {
                                        detaJson.deviceState = nameArr[k] + ":" + onOff
                                    } else {
                                        detaJson.deviceState += "," + nameArr[k] + ":" + onOff
                                    }
                                } else {
                                    var mode1 = " " + modeList[epDataList[k].substr(3, 1)];
                                    console.log(mode1);
                                    var temp1 = " " + parseInt(epDataList[k].substr(4, 2)) + "℃";
                                    console.log(temp1)
                                    if (k === 0) {
                                        detaJson.deviceState = nameArr[k] + ":" + onOff + mode1 + temp1
                                    } else {
                                        detaJson.deviceState += "," + nameArr[k] + ":" + onOff + mode1 +
                                            temp1
                                    }
                                }
                            }
                        } else if (item.object.split(">")[2] == "24") {
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_24 +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "javascript:;";
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_24.png)"
                            if (item.description != undefined && item.description.length > 0) {
                                detaJson.deviceState = item.description;
                                detaJson.description = item.description;
                            }
                        } else if (item.object.split(">")[2] == "28") {
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_28 +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "device_water_valve_28.html";
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_28.png)"
                            var epdata = item.epData;
                            detaJson.deviceState = lang_txt16 + "  " + epdata / 60 + 'min' +
                                device_28_close_after;
                        } else if (item.object.split(">")[2] == "Ad") {
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_Ad +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "setDeviceState.html";
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_Ad.png)"
                            var epdata = item.epData;
                            if (item.epData == "0") {
                                detaJson.deviceState = lang_txt18
                            } else {
                                detaJson.deviceState = lang_txt19
                            }
                        } else if (item.object.split(">")[2] == "C0") {
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_C0 +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "setDeviceState.html";
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_C0.png)"
                            if (item.epData == "0") {
                                detaJson.deviceState = lang_txt18
                            } else {
                                detaJson.deviceState = lang_txt19
                            }
                        }
                        if (item.object.split(">")[2] == "A1") {
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_a1_01.png)"
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_A1 +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "switch_At_sceneTask.html";
                            if (item.epData == "0") {
                                detaJson.deviceState = lang_txt18
                            } else {
                                detaJson.deviceState = lang_txt19
                            }
                            if (item.epName) {
                                detaJson.switchName = item.epName;
                            }
                        } else if (item.object.split(">")[2] == "A2") {
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_A2 +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "device_A2.html";
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_A2.png)"
                            if (item.description != undefined && item.description.length > 0) {
                                detaJson.deviceState = item.description;
                                detaJson.description = item.description;
                            }
                        } else if (item.object.split(">")[2] == "B9") {
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_B9.png)"
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_B9 +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "switch_At_sceneTask.html";
                            if (item.object.split(">")[1] == 1) {
                                if (item.epData == "0") {
                                    detaJson.deviceState = lang_txt18
                                } else {
                                    detaJson.deviceState = lang_txt19
                                }
                            } else if (item.object.split(">")[1] == 2) {
                                if (item.description && item.description.length > 0) {
                                    detaJson.deviceState = item.description;
                                    detaJson.description = item.description;
                                }
                            }

                            if (item.epName) {
                                detaJson.switchName = item.epName;
                            }
                        } else if (item.object.split(">")[2] == "Bo") {
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_Bo +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "device_Bo.html";
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_Bo.png)"
                            if (item.description != undefined && item.description.length > 0) {
                                detaJson.deviceState = item.description;
                                detaJson.description = item.description;
                            }
                        } else if (item.object.split(">")[2] == "Ol") {
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_Ol +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "device_Ol_01.html";
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_Ol.png)"
                            var modeList = {
                                "1": device_Ol_mode_cool,
                                "2": device_Ol_mode_heat,
                                "3": device_Ol_mode_fan,
                                "4": device_Ol_mode_warm,
                                "5": device_Ol_mode_warm_heat,
                            };
                            if (item.description && item.description.length > 0) {
                                detaJson.description = item.description;
                            }
                            var nameArr = detaJson.description.split("-");
                            var epDataList = item.epData.split(",");
                            console.log(epDataList);
                            for (var k = 0; k < epDataList.length; k++) {
                                //510126FF000401FFFF
                                //123:开 制冷 26℃ 4 低,8:开 制冷 26℃ 4 低
                                console.log(epDataList);
                                var onOff = epDataList[k].substr(2, 1) === "0" ? lang_close : lang_open;
                                if (epDataList[k].substr(2, 1) === "0") {
                                    if (k === 0) {
                                        detaJson.deviceState = nameArr[k] + ":" + onOff
                                    } else {
                                        detaJson.deviceState += "," + nameArr[k] + ":" + onOff
                                    }
                                } else {
                                    var mode1 = " " + modeList[epDataList[k].substr(3, 1)];
                                    console.log(mode1);
                                    var temp1 = " " + parseInt(epDataList[k].substr(4, 3)) / 10.0 + "℃";
                                    console.log(temp1)
                                    if (k === 0) {
                                        detaJson.deviceState = nameArr[k] + ":" + onOff + mode1 + temp1
                                    } else {
                                        detaJson.deviceState += "," + nameArr[k] + ":" + onOff + mode1 +
                                            temp1
                                    }
                                }
                            }
                        } else if (item.object.split(">")[2] == "Ok") {
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? device_Ok_name +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "set_device_Ok.html";
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_Ok.png)"
                            var cmds = item.epData.split(",");
                            var onOff;
                            var mode = "";
                            var temp = "";
                            for (var j = 0; j < cmds.length; j++) {
                                var code = cmds[j].substring(0, 4);
                                var value = cmds[j].substring(4, cmds[j].length);
                                if ("0104" == code) {
                                    if ("0" == value) {
                                        onOff = lang_close;
                                    } else {
                                        onOff = lang_open;
                                    }
                                } else if ("0103" == code) {
                                    if ("0" == value) {
                                        mode = lang_OZ_Type3;
                                    } else if ("1" == value) {
                                        mode = lang_OZ_Type2;
                                    } else if ("2" == value) {
                                        mode = lang_OZ_Type1;
                                    } else if ("3" == value) {
                                        mode = lang_OZ_Type4;
                                    } else if ("4" == value) {
                                        mode = lang_OZ_Type6;
                                    }
                                } else if ("0105" == code) {
                                    temp = value + "℃";
                                }
                            }
                            detaJson.deviceState = onOff + " " + mode + " " + temp;
                        } else if (item.object.split(">")[2] == "On") {
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_On +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = ".html";
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_On.png)";
                            var cmds = item.epData.split(",");
                            var onOff;
                            var fan = "";
                            onOff = (cmds[0].substring(0, 1) == "1") ? lang_txt16 : lang_txt17;
                            if (cmds.length > 1 && cmds[1]) {
                                fan = (cmds[1].substring(0, 2) == "01") ?
                                    lang_airsystem_Oj_Wind_speed_low :
                                    lang_airsystem_Oj_Wind_speed_high;
                            }

                            detaJson.deviceState = onOff + " " + fan
                        } else if (item.object.split(">")[2] == "Af") {
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_Af +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "device_Af.html";
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_Af.png)";
                            var arr = item.epData.split(',');
                            var deviceState = "";
                            var status = "";
                            var mode = "";
                            var temp = "";
                            var fan = "";
                            for (var indexAf = 0; indexAf < arr.length; indexAf++) {
                                switch (indexAf) {
                                    case 0:
                                        {
                                            status = arr[0];
                                            deviceState = (status == '0') ? lang_close : lang_open;
                                        }
                                        break;
                                    case 1:
                                        {
                                            mode = arr[1];
                                            if (mode == '1') {
                                                modeStr = " " + lang_houseKeeper1_82_Type2;
                                            } else if (mode == '2') {
                                                modeStr = " " + lang_houseKeeper1_82_Type1;
                                            } else if (mode == '3') {
                                                modeStr = " " + lang_houseKeeper1_82_Type3;
                                            } else if (mode == '4') {
                                                modeStr = " " + device_Af_Hot;
                                            } else if (mode == '5') {
                                                modeStr = " " + device_Af_Cool;
                                            }
                                            deviceState += modeStr;
                                        }
                                        break;
                                    case 2:
                                        {
                                            if (arr[2].length == 8) {
                                                if (mode == '1') {
                                                    //制热
                                                    var tempStr = arr[2].substring(0, 4);
                                                    temp = parseFloat(tempStr);
                                                    if (temp > 100) {
                                                        temp = temp / 100;
                                                    }
                                                    deviceState = deviceState + " " + temp;
                                                } else if (mode == '2') {
                                                    //制冷
                                                    var tempStr = arr[2].substring(4, 8);
                                                    temp = parseFloat(tempStr);
                                                    if (temp > 100) {
                                                        temp = temp / 100;
                                                    }
                                                    deviceState = deviceState + " " + temp;
                                                }
                                            }

                                        }
                                        break;
                                    case 3:
                                        {
                                            if (arr[3] == "1") {
                                                fan = " " + lang_OZ_Speed3;
                                            } else if (arr[3] == "2") {
                                                fan = " " + lang_OZ_Speed2;
                                            } else if (arr[3] == "3") {
                                                fan = " " + lang_OZ_Speed1;
                                            } else if (arr[3] == "4") {
                                                fan = " " + lang_OZ_Speed4;
                                            }
                                            deviceState += fan;
                                        }
                                        break;
                                }
                            }
                            detaJson.deviceState = deviceState;
                        } else if (item.object.split(">")[2] == "Br") {
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_Br +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "device_Af.html";
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_Br.png)";
                            var arr = item.epData.split(',');
                            var deviceState = "";
                            var status = "";
                            var mode = "";
                            var temp = "";
                            var fan = "";
                            var tempStr = "";
                            for (var indexAf = 0; indexAf < arr.length; indexAf++) {
                                switch (indexAf) {
                                    case 0:
                                        {
                                            status = arr[0];
                                            deviceState = (status == '0') ? lang_close : lang_open;
                                        }
                                        break;
                                    case 1:
                                        {
                                            mode = arr[1];
                                            if (mode == '1') {
                                                modeStr = " " + lang_houseKeeper1_82_Type2;
                                            } else if (mode == '2') {
                                                modeStr = " " + lang_houseKeeper1_82_Type1;
                                            } else if (mode == '3') {
                                                modeStr = " " + lang_houseKeeper1_82_Type3;
                                            } else if (mode == '4') {
                                                modeStr = " " + device_Af_Hot;
                                            } else if (mode == '5') {
                                                modeStr = " " + device_Af_Cool;
                                            }
                                            deviceState += modeStr;
                                        }
                                        break;
                                    case 2:
                                        {
                                            if (arr[2].length == 8 || arr[2].length == 5 || arr[2].length == 3) {
                                                if (mode == '1') {
                                                    //制热
                                                    if (item.object.split(">")[2] == "Br") {
                                                        tempStr = arr[2].substring(1, 5);
                                                    } else {
                                                        tempStr = arr[2].substring(0, 4);
                                                    }
                                                    temp = parseFloat(tempStr);
                                                    if (temp > 100) {
                                                        temp = temp / 100;
                                                    }
                                                    deviceState = deviceState + " " + temp;
                                                } else if (mode == '2') {
                                                    //制冷
                                                    if (item.object.split(">")[2] == "Br") {
                                                        tempStr = arr[2].substring(1, 5);
                                                    } else {
                                                        tempStr = arr[2].substring(4, 8);
                                                    }
                                                    temp = parseFloat(tempStr);
                                                    if (temp > 100) {
                                                        temp = temp / 100;
                                                    }
                                                    deviceState = deviceState + " " + temp;
                                                }
                                            }

                                        }
                                        break;
                                    case 3:
                                        {
                                            if (arr[3] == "1") {
                                                fan = " " + lang_OZ_Speed3;
                                            } else if (arr[3] == "2") {
                                                fan = " " + lang_OZ_Speed2;
                                            } else if (arr[3] == "3") {
                                                fan = " " + lang_OZ_Speed1;
                                            } else if (arr[3] == "4") {
                                                fan = " " + lang_OZ_Speed4;
                                            }
                                            deviceState += fan;
                                        }
                                        break;
                                }
                            }
                            detaJson.deviceState = deviceState;
                        } else if (item.object.split(">")[2] == "Bs") {
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? device_name_Bs +
                                item.name.split("#")[2] : item.name
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_Bs.png)";
                            detaJson.editUrl = "device_Bs.html";
                            var arr = item.epData.split(',');
                            var deviceState = "";
                            var status = "";
                            var mode = "";
                            var tempStr = "";
                            var temp;
                            for (var Bs = 0; Bs < arr.length; Bs++) {
                                switch (Bs) {
                                    case 0:
                                        {
                                            status = arr[0];
                                            deviceState = (status == '20') ? lang_closeSingle : lang_openSingle;
                                        }
                                        break;
                                    case 1:
                                        {
                                            mode = arr[1];
                                            var modeStr = "";
                                            if (mode == '31') {
                                                modeStr = " " + Device_Bs_01;
                                            } else if (mode == '32') {
                                                modeStr = " " + Device_Bs_02;
                                            } else if (mode == '33') {
                                                modeStr = " " + Device_Bs_03;
                                            } else if (mode == '34') {
                                                modeStr = " " + Device_Bs_04;
                                            }
                                            deviceState += modeStr;
                                        }
                                        break;
                                    case 2:
                                        {
                                            if (arr[2].substr(2, 1) == "0") {
                                                tempStr = (parseFloat(arr[2].substring(3))) / 10;
                                            } else if (arr[2].substr(1, 1) == "0" && arr[2].substr(2, 1) !==
                                                "0") {
                                                tempStr = (parseFloat(arr[2].substring(2))) / 10;
                                            }
                                            deviceState = deviceState + " " + tempStr;
                                        }
                                        break;
                                }
                            }
                            detaJson.deviceState = deviceState;
                        } else if (item.object.split(">")[2] == "Bp") {
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_Bp +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "set_device_Bp.html";
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_Bp.png)";
                            var cmds = item.epData.substring(14, item.epData.length);
                            var onOff = cmds.substring(0, 2) == "01" ? lang_open : lang_close;
                            var mode = cmds.substring(2, 4);
                            var modeStr = "";
                            switch (mode) {
                                case "01":
                                    modeStr = lang_OZ_Type1;
                                    break;
                                case "02":
                                    modeStr = lang_OZ_Type2;
                                    break;
                                case "03":
                                    modeStr = lang_OZ_Type3;
                                    break;
                                case "05":
                                    modeStr = lang_OZ_Type4;
                                    break;
                            }
                            var temp = cmds.substring(4, 6) == "ff" ? "" : parseInt(cmds.substring(4, 6),
                                16) + "℃";
                            detaJson.deviceState = onOff + " " + modeStr + " " + temp;
                        } else if (item.object.split(">")[2] == "Bx") {
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_Bx.png)"
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_Bx +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "device_Bx.html";
                            var state = item.epData.substr(0, 4);
                            var temp = item.epData.substr(7, 4);
                            if (state == "0100") {
                                detaJson.switchName = lang_txt_close;
                            } else {
                                detaJson.switchName = lang_txt_open;
                                temp = parseInt(temp, 16) / 10;
                                detaJson.deviceState = '' + temp + '℃';
                            }
                        } else if (item.object.split(">")[2] == "By") {
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_By +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "device_By.html";
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_By.png)";
                            var cmds = item.epData.substring(14, item.epData.length);
                            var onOff = cmds.substring(0, 2) == "01" ? lang_open : lang_close;
                            var mode = cmds.substring(2, 4);
                            var windDer = cmds.substring(8, 12);
                            var wind = cmds.substring(12, 14);
                            var modeStr = "";
                            var windDerStr = "";
                            var windStr = "";
                            switch (mode) {
                                case "01":
                                    modeStr = lang_OZ_Type1;
                                    break;
                                case "02":
                                    modeStr = lang_OZ_Type2;
                                    break;
                                case "03":
                                    modeStr = lang_OZ_Type3;
                                    break;
                                case "05":
                                    modeStr = lang_OZ_Type4;
                                    break;
                            }
                            var temp = cmds.substring(4, 6) == "ff" ? "" : parseInt(cmds.substring(4, 6), 16) + "℃";
                            switch (wind) {
                                case "01":
                                    windStr = lang_OZ_Speed3;
                                    break;
                                case "02":
                                    windStr = lang_OZ_Speed2;
                                    break;
                                case "03":
                                    windStr = lang_OZ_Speed1;
                                    break;
                                case "00":
                                    windStr = lang_OZ_Speed4;
                                    break;
                            }
                            switch (windDer) {
                                case "0001":
                                    windDerStr = direction_03;
                                    break;
                                case "0002":
                                    windDerStr = direction_02;
                                    break;
                                case "0004":
                                    windDerStr = direction_01;
                                    break;
                                case "0007":
                                    windDerStr = direction_04;
                                    break;
                            }
                            detaJson.deviceState = onOff + " " + modeStr + " " + temp + " " + windStr + " " + windDerStr;
                        } else if (item.object.split(">")[2] == "91") {
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_91 +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "device_91_1.html";
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_91.png)"
                            var eplist = item.epData.split(",");
                            var light = eplist.pop()
                            if (light.indexOf('2') === 0) {
                                if (light.substring(1, 4) == "000") {
                                    detaJson.deviceState = switch_off
                                } else {
                                    detaJson.deviceState = switch_on
                                }
                            } else {
                                detaJson.deviceState = switch_off
                            }
                        } else if (item.object.split(">")[2] == "Cc") {
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_Cc.png)"
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? languageUtil.getResource("device_name_Cc") +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "device_Cc.html";
                            if (item.epData == "20") {
                                detaJson.switchName = lang_switch_off;
                                detaJson.deviceState = "0%";
                            } else {
                                detaJson.switchName = lang_switch_on;
                                detaJson.deviceState = Number(item.epData.substring(1)) + "%";
                            }
                        } else if (item.object.split(">")[2] == "Ca") {
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_Ca.png)"
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? languageUtil.getResource("device_name_Ca") +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "device_Ca.html";
                            if (item.epData == "1") {
                                detaJson.deviceState = lang_txt_stop;
                            } else if(item.epData == "2") {
                                detaJson.deviceState = lang_txt_open;
                            }else if(item.epData == "3"){
                                detaJson.deviceState = lang_txt_close
                            }
                        } else if (item.object.split(">")[2] == "Cb") {
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_Cb.png)"
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? languageUtil.getResource("device_name_Cb") +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "device_Cb.html";
                            for (var c = 0; c < item.epData.length; c++) {
                                var state = item.epData[c];
                                if(state === "1") {
                                    detaJson.deviceState += ((c == 0) ? "1" : " 2") + lang_A1_way + lang_txt_stop;
                                } else if(state === "2"){
                                    detaJson.deviceState += ((c == 0) ? "1" : " 2") + lang_A1_way + lang_txt_open
                                } else if(state === "3") {
                                    detaJson.deviceState += ((c == 0) ? "1" : " 2") + lang_A1_way + lang_txt_close
                                }
                            }
                        } else if (item.object.split(">")[2] == "13") {
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_13.png)"
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? languageUtil.getResource("device_name_13") +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "device_13.html";
                            var epData = item.epData;
                            var range1 = Number(epData.substr(0,3));
                            var range2 = Number(epData.substr(3,3));
                            range1 = range1 === 0 ? lang_closeSingle : range1;
                            range1 = range1 === 100 ? lang_openSingle : range1;
                            range1 = (range1 === lang_openSingle || range1 === lang_closeSingle) ? range1 : range1+"%";
                            range2 = range2 === 0 ? lang_closeSingle : range2;
                            range2 = range2 === 100 ? lang_openSingle : range2;
                            range2 = (range2 === lang_openSingle || range2 === lang_closeSingle) ? range2 : range2+"%";
                            detaJson.deviceState = "1:"+range1+" 2:"+range2;
                        }else if (item.object.split(">")[2] == "a1") {
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_a1.png)"
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_a1 +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "setDeviceState.html";
                            if (item.epData == "0") {
                                detaJson.deviceState = lang_txt18
                            } else {
                                detaJson.deviceState = lang_txt19
                            }
                        } else if (item.object.split(">")[2] == "Cj") {
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_Cj.png)"
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_Cj +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "device_Bx.html";
                            var state = item.epData.substr(0, 4);
                            var temp = item.epData.substr(7, 2);
                            if (state == "0100") {
                                detaJson.switchName = lang_txt_close;
                            } else {
                                detaJson.switchName = lang_txt_open;
                                temp = parseInt(temp, 16);
                                detaJson.deviceState = '' + temp + '℃';
                            }
                        } else if(item.object.split(">")[2] == "Op") {
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_Op_1.png)"
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_Op +
                                item.name.split("#")[2] : item.name;
                            detaJson.editUrl = "device_triple_Op.html";
                            if (item.description && item.description.length > 0) {
                                detaJson.description = item.description;
                            }
                            var nameArr = detaJson.description.split("-");
                            var epDataList = item.epData.split(",");
                            console.log(epDataList);
                            var type = epDataList[0].substr(3, 1);
                            var categoryName = "空调";
                            if(type == "1") {
                                categoryName = "新风";
                            } else if (type == "2") {
                                categoryName = "地暖";
                            }
                            var onOff = epDataList[0].substr(3, 1) === "0" ? lang_closeSingle : lang_openSingle;
                            detaJson.deviceState = categoryName + " " + onOff
                            for (var k = 0; k < epDataList.length; k++) {
                                if(k == 0) {
                                    detaJson.deviceState += " " + nameArr[k];
                                } else {
                                    detaJson.deviceState += "," + nameArr[k];
                                }
                            }
                        }else if (item.object.split(">")[2] == "Ck") {
                            detaJson.name = item.name.indexOf("#$default$#") != -1 ? lang_name_Ck +
                                item.name.split("#")[2] : item.name;
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_Ck.png)"
                            detaJson.editUrl = "device_Ck.html";
                            if (item.description && item.description.length > 0) {
                                detaJson.description = item.description;
                            }
                            var epDataList = item.epData.split(",");
                            console.log(epDataList);
                            var onOff = epDataList[0] === "0" ? lang_txt32 : lang_txt31;
                            var speed = epDataList[1];
                            if (onOff === lang_txt32) {
                                detaJson.deviceState = onOff;
                            } else if (onOff === lang_txt31) {
                                switch (speed) {
                                    case "1":
                                        detaJson.deviceState = onOff + " " + lang_airsystem_Oj_Wind_speed_low;
                                        break;
                                    case "2":
                                        detaJson.deviceState = onOff + " " + lang_airsystem_Oj_Wind_speed_mid;
                                        break;
                                    case "3":
                                        detaJson.deviceState = onOff + " " + lang_airsystem_Oj_Wind_speed_high;
                                        break;
                                }

                            }
                        }

                        if (item.cancelDelay == "1") {
                            detaJson.cancelDelay = "1"
                        }
                        detaJson.object = item.object
                        detaJson.delay = item.delay
                        detaJson.epData = item.epData
                        arr1[i] = detaJson
                    } else if (item.type == 3) {
                        detaJson = {
                            "type": "3",
                            "name": "",
                            "delay": "",
                            "epData": item.epData,
                            "object": item.object,
                            "deviceState": "",
                            "deviceIcon": "",
                            "roomName": ''
                        }
                        if (item.object.split(">")[2] == "CMICA3") {
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_CMICA3.png)"
                            detaJson.name = languageUtil.getResource("camera_houseKeeper_CMICA3");
                            detaJson.editUrl = "setCameraAction.html";
                            detaJson.deviceState = languageUtil.getResource("camera_houseKeeper_task");
                        } else if (item.object.split(">")[2] == "CMICA6") {
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_CMICA3.png)"
                            detaJson.name = languageUtil.getResource("camera_houseKeeper_CMICA6");
                            detaJson.editUrl = "setCameraAction.html";
                            detaJson.deviceState = languageUtil.getResource("camera_houseKeeper_task");
                        } else if (item.object.split(">")[2] == "CMICA2") {
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_CMICA2.png)"
                            detaJson.name = languageUtil.getResource("camera_houseKeeper_CMICA2");
                            detaJson.editUrl = "setCameraAction.html";
                            detaJson.deviceState = languageUtil.getResource("camera_houseKeeper_task")
                        } else if (item.object.split(">")[2] == "CMICA4") {
                            detaJson.name = lang_name_CMICA4;
                            detaJson.editUrl = "setCameraAction.html";
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_CMICA4.png)"
                            if (item.description != undefined && item.description.length > 0) {
                                detaJson.deviceState = item.description;
                                detaJson.description = item.description;
                            }
                        }
                        if (item.cancelDelay == "1") {
                            detaJson.cancelDelay = "1"
                        }
                        detaJson.object = item.object
                        detaJson.delay = item.delay
                        detaJson.epData = item.epData
                        detaJson.icon = item.icon
                        arr1[i] = detaJson
                    } else if (item.type == 4) {
                        detaJson = {
                            "type": "4",
                            "name": "",
                            "delay": "",
                            "epData": item.epData,
                            "object": item.object,
                            "deviceState": "",
                            "deviceIcon": "",
                            "roomName": ''
                        }
                        if (item.object.split(">")[2] == "XW01") {
                            detaJson.name = lang_name_XW01; //item.name.indexOf("#$default$#") != -1 ? lang_name_XW01 + item.name.split("#")[2] : item.name
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_XW01.png)";
                            detaJson.editUrl = "music_XW01.html";
                            console.log(item.epData);
                            var epdata = JSON.parse(item.epData);
                            var epdataArr = epdata.endpoint;
                            if (epdataArr != undefined) {
                                if (epdataArr.length == 1) {
                                    var action = epdataArr[0].action;
                                    for (var key in action) {
                                        if (key == "Play") {
                                            var play = action.Play;
                                            if (play.value == "stop") {
                                                detaJson.deviceState = lang_XW01_stop;
                                            }
                                        }
                                    }
                                } else if (epdataArr.length == 2) {
                                    var playState;
                                    var volume;
                                    for (var j = 0; j < epdataArr.length; j++) {
                                        var action = epdataArr[j].action;
                                        for (var key in action) {
                                            if (key == "Play") {
                                                var play = action.Play;
                                                if (play.value == "play") {
                                                    playState = lang_XW01_play;
                                                }
                                            }
                                            if (key == "Volume") {
                                                volume = action.Volume.value;
                                            }
                                        }
                                    }
                                    detaJson.deviceState = playState + " " + lang_XW01_volume + ":" +
                                        volume;
                                }
                            }
                        } else if (item.object.split(">")[2] == "HS05") {
                            detaJson.name = lang_name_HS05; //item.name.indexOf("#$default$#") != -1 ? lang_name_HS05 + item.name.split("#")[2] : item.name
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_HS05.png)";
                            detaJson.editUrl = "set_HS05.html";
                            console.log(item.epData);
                            var epdata = JSON.parse(item.epData);
                            var epdataArr = epdata.endpoint;
                            if (epdataArr != undefined) {
                                for (var j = 0; j < epdataArr.length; j++) {
                                    var action = epdataArr[j].action;
                                    for (var key in action) {
                                        if (key == "Temperature") {
                                            var Temperature = action.Temperature;
                                            if (Temperature.zone == "1") {
                                                detaJson.deviceState += Temperature.value + "℃  ";
                                            } else if (Temperature.zone == "2") {
                                                detaJson.deviceState += Temperature.value + "℃  ";
                                            } else if (Temperature.zone == "3") {
                                                detaJson.deviceState += Temperature.value + "℃  ";
                                            }
                                        }
                                        if (key == "FridgeMode") {
                                            var FridgeMode = action.FridgeMode;
                                            if (FridgeMode.value == "0") {
                                                detaJson.deviceState += lang_HS05_model + "：" +
                                                    lang_HS05_model_0;
                                            } else if (FridgeMode.value == "1") {
                                                detaJson.deviceState += lang_HS05_model + "：" +
                                                    lang_HS05_model_1;
                                            } else if (FridgeMode.value == "2") {
                                                detaJson.deviceState += lang_HS05_model + "：" +
                                                    lang_HS05_model_2;
                                            }
                                        }
                                    }
                                }
                            }
                        } else if (item.object.split(">")[2] == "IF02") {
                            detaJson.name = lang_name_IF01;
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_IF02.png)";
                            detaJson.editUrl = "javascript:;";
                            console.log(item.epData);
                            var epdata = JSON.parse(item.epData);
                            var extraData = epdata.extraData;
                            if (extraData != undefined) {
                                var blockName = extraData.blockName;
                                if (blockName != undefined) {
                                    detaJson.deviceState = blockName;
                                }
                            }
                        }
                        if (item.cancelDelay == "1") {
                            detaJson.cancelDelay = "1"
                        }
                        detaJson.object = item.object
                        detaJson.delay = item.delay
                        detaJson.epData = item.epData
                        detaJson.icon = item.icon
                        arr1[i] = detaJson
                    } else if (item.type == 1) {
                        detaJson = {
                            "type": "1",
                            "name": "",
                            "delay": "",
                            "epData": item.epData,
                            "object": item.object,
                            "deviceState": "",
                            "deviceIcon": "",
                            "roomName": ''
                        }
                        if (item.object.split(">")[2] == "CMICA2") { //随便看
                            detaJson.name = lang_name_CMICA2;
                            detaJson.editUrl = "setCameraAction.html";
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_CMICA2.png)";
                            console.log(item.epData);
                            var epdata = JSON.parse(item.epData);
                            if (epdata.action === 'startSafety') {
                                detaJson.deviceState = lang_camera_safety_open
                            } else if (epdata.action === 'stopSafety') {
                                detaJson.deviceState = lang_camera_safety_close
                            }
                        }
                        if (item.object.split(">")[2] == "CMICA3") { //企鹅
                            detaJson.name = lang_name_CMICA3;
                            detaJson.editUrl = "setCameraAction.html";
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_CMICA3.png)";
                            console.log(item.epData);
                            var epdata = JSON.parse(item.epData);
                            if (epdata.action === 'startSafety') {
                                detaJson.deviceState = lang_camera_safety_open
                            } else if (epdata.action === 'stopSafety') {
                                detaJson.deviceState = lang_camera_safety_close
                            }
                        }
                        if (item.object.split(">")[2] == "CMICA4") { //小物
                            detaJson.name = lang_name_CMICA4;
                            detaJson.editUrl = "setCameraAction.html";
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_CMICA4.png)";
                            console.log(item.epData);
                            var epdata = JSON.parse(item.epData);
                            if (epdata.action === 'startSafety') {
                                detaJson.deviceState = lang_camera_safety_open
                            } else if (epdata.action === 'stopSafety') {
                                detaJson.deviceState = lang_camera_safety_close
                            }
                        }
                        if (item.object.split(">")[2] == "CMICA5") { //户外摄像机
                            detaJson.name = lang_name_CMICA5;
                            detaJson.editUrl = "setCameraAction.html";
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_CMICA5.png)";
                            console.log(item.epData);
                            var epdata = JSON.parse(item.epData);
                            if (epdata.action === 'startSafety') {
                                detaJson.deviceState = lang_camera_safety_open
                            } else if (epdata.action === 'stopSafety') {
                                detaJson.deviceState = lang_camera_safety_close
                            }
                        }
                        if (item.object.split(">")[2] == "CMICA6") { //企鹅4G
                            detaJson.name = lang_name_CMICA6;
                            detaJson.editUrl = "setCameraAction.html";
                            detaJson.deviceIcon = "url(../../source/deviceIcon/device_icon_CMICA3.png)";
                            console.log(item.epData);
                            var epdata = JSON.parse(item.epData);
                            if (epdata.action === 'startSafety') {
                                detaJson.deviceState = lang_camera_safety_open
                            } else if (epdata.action === 'stopSafety') {
                                detaJson.deviceState = lang_camera_safety_close
                            }
                        }

                        if (item.cancelDelay == "1") {
                            detaJson.cancelDelay = "1"
                        }
                        detaJson.object = item.object
                        detaJson.delay = item.delay
                        detaJson.epData = item.epData
                        detaJson.icon = item.icon
                        arr1[i] = detaJson
                    } else {
                        detaJson = {
                            "type": "0",
                            "name": "",
                            "delay": "",
                            "epData": item.epData,
                            "object": item.object,
                            "SceneName": "",
                            "icon": "",
                            "deviceState": ""
                        }
                        detaJson.name = item.name;
                        detaJson.object = item.object
                        detaJson.delay = item.delay
                        detaJson.epData = item.epData
                        detaJson.icon = item.icon
                        arr1[i] = detaJson
                    }
                })
                //生效条件
                if (info.getItem("conditionArray") == null) {
                    info.setItem("conditionArray", JSON.stringify(arr2))
                } else {
                    var actArr2 = JSON.parse(info.getItem("conditionArray"));
                    actArr2 = actArr2.concat(arr2);
                    info.setItem("conditionArray", JSON.stringify(actArr2))
                }
                conditionEdit();//编辑生效条件

                if (info.getItem("ldArr") == null) {
                    info.setItem("ldArr", JSON.stringify(arr))
                } else {
                    var actArr1 = JSON.parse(info.getItem("ldArr"))
                    actArr1 = actArr1.concat(arr)
                    info.setItem("ldArr", JSON.stringify(actArr1))
                }
                meetCondition1();//编辑条件

                if (info.getItem("actionArray") == null) {
                    info.setItem("actionArray", JSON.stringify(arr1))
                } else {
                    var actArr = JSON.parse(info.getItem("actionArray"))
                    actArr = actArr.concat(arr1)
                    info.setItem("actionArray", JSON.stringify(actArr))
                }
                //编辑执行任务
                edit()
            }
        })
    }

    function meetCondition1() {
        if (info.getItem("ldArr") == null) {
            $(".no_cond").show()
        } else {
            $(".no_cond").hide()
            $(".meetTask").html("");
            JSON.parse(info.getItem("ldArr")).map(function (list) {
                //console.log(list.flag)
                if (list.name == "") {
                    var str =
                        '<li><a class="offline" href="javascript:;" style="line-height: 5rem;font-size:1.5rem ;">' +
                        lang_device_delete + '</a><div class="delete deleteLdArr">' + lang_txt26 +
                        '</div></li>'
                    $(".meetTask").append(str)
                } else {
                    var childDeviceStr = "";
                    if (list.epName == undefined || list.epName == null) {
                        list.epName = ''
                    } else {
                        childDeviceStr = '<em class="epName" style="color:#333;font-size:1.2rem;">' + list.epName + '</em>'
                    }
                    var url = list.editUrl;
                    var devId = list.object.split(">")[0];
                    var deviceType = list.object.split(">")[2];
                    var deviceNum = list.object.split(">")[1];
                    var str = "<li class='addCondition' data-url='"+url+"' " +
                        "data-devID='"+devId+"' data-type='"+deviceType+"' data-num='"+deviceNum+"'>" +
                        "<a href='javascript:;' data-icon='"+list.deviceIcon+"' style='background:" + list.deviceIcon + " no-repeat left center;background-size:4.3rem auto'>" +
                        "<span>" +
                        "<strong>" + list.name + " </strong><em></em>" + childDeviceStr + "<em>" + list.deviceState +
                        "</em>" +
                        "</span></a>" +
                        "<div class='delete deleteLdArr delete1'>" + lang_txt26 + "</div></li>"
                    $(".meetTask").append(str)
                }
            })
        }
        $(".meetTask li").leftDelete({
            marginLeft: "-20%"
        });
        $(".addCondition").on("click",function(e){
            e.stopPropagation();
            //再编辑增加返回弹出是否放弃修改弹窗
            info.setItem("editFlag", "yes");
            info.setItem("deviceName",$(this).find("strong").html());
            info.setItem("deviceIcon",$(this).find("a").attr("data-icon"));
            info.setItem("deviceID",$(this).attr("data-devID"));
            info.setItem("num",$(this).attr("data-num"));
            info.setItem("type",$(this).attr("data-type"));
            info.setItem("index",$(this).index());
            var _this = $(this);
            plus.gatewayCmd.getDeviceInfo($(this).attr("data-devID"), function (data) {
                info.setItem("taskType", "triggerTask");
                if (data) {
                    if (data.type == "A1" || data.type == "Bv" || data.type == "Bw" || data.type == "At" || data.type == "Cm" || data.type == "Cn") {
                        var nameList = [];
                        if (data.endpoints) {
                            var endpoints = data.endpoints;
                            for (var j in endpoints) {
                                var endpointName = endpoints[j].endpointName ? endpoints[j].endpointName :
                                    endpoints[j].endpointNumber + lang_A1_way;
                                nameList.push(endpointName);
                            }
                        }
                        info.setItem("epNameList" + data.devID, JSON.stringify(nameList));
                    }
                    window.location = $(_this).attr("data-url");
                }
            });
        })
    }

    function conditionEdit() {
        var conditionArray = JSON.parse(info.getItem("conditionArray"))
        //若无生效条件 生效条件在最底部，若已添加一条生效条件 则去掉定位元素 到与其他任务平行的位置
        if (conditionArray && conditionArray != "[]" && conditionArray.length !== 0) {
            $("#conditionTask").removeClass("cir_fix")
        } else {
            $("#conditionTask").addClass("cir_fix")
        }
        if (conditionArray == null) {
            $(".no_condition").show()
        } else {
            $(".no_condition").hide();
            $(".conditionList").html("");
            var len = conditionArray.length - 1;
            conditionArray.map(function (list, i) {
                var relative = "";
                if (info.getItem("relative") === "or") {
                    relative = "<i style='color:#8dd652;' class='conditionRelation'>" + lang_or + "</i>"
                } else if (info.getItem("relative") === "and") {
                    relative = "<i style='color:#8dd652;' class='conditionRelation'>" + lang_and + "</i>"
                }
                if (i == len) {
                    relative = ""
                }
                var type = list.exp.split(".")[0];
                if (type == 0) {
                    if (list.name == "") {
                        var str1 =
                            '<li><span style="line-height:5rem;background:url(../fonts/icon_offline.png) no-repeat left center;background-size:3.4rem auto;">' +
                            lang_scene_delete + '</span><div class="delete deleteCondition">' + lang_txt26 +
                            '</div></li>'
                        $(".conditionList").append(str1)
                    } else {
                        var sceneStr = '<li data-type="' + type + '">' +
                            '<span style="background:url(../../source/sceneIcon/scene_normal_' + list.icon +
                            '.png) no-repeat left center;background-size:4rem auto;">' +
                            '<strong>' + list.name + '</strong>' +
                            '<em>' + lang_scene_opend + '</em>' +
                            relative + '</span>' +
                            '<div class="delete deleteCondition">' + lang_txt26 + '</div>' +
                            '</li>';
                        $(".conditionList").append(sceneStr)
                    }
                } else if (type == 1) {
                    var timeStr = '<li class="conditionTime" data-type="' + type + '">' +
                        '<span style="background:url(../fonts/icon_time.png) no-repeat left center;background-size:3.2rem auto;">' +
                        '<strong>' + lang_txt24 + list.startTime + lang_txt25 + list.endTime + '</strong>' +
                        '<em>' + list.weekStr + '</em>' +
                        relative + '</span>' +
                        '<div class="delete deleteCondition">' + lang_txt26 + '</div>' +
                        '</li>';
                    $(".conditionList").append(timeStr)
                } else if (type == 2) {
                    if (list.name == "") {
                        var str =
                            '<li><span style="line-height:5rem;background:url(../fonts/icon_offline.png) no-repeat left center;background-size:3.4rem auto;">' +
                            lang_device_delete + '</span><div class="delete deleteCondition">' + lang_txt26 +
                            '</div></li>'
                        $(".conditionList").append(str)
                    } else {
                        var deviceType = (list.exp.split(">")[2]).substr(0, 2);
                        var num = list.exp.split(">")[1];
                        var devId = (list.exp.split(">")[0]).substr(2, list.exp.split(">")[0].length - 2);
                        var deviceStr = "<li class='conditionDevice' data-deviceType='"+deviceType+"' " +
                            "data-type='" + type + "' " +
                            "data-devID='"+devId+"' data-url='"+list.editUrl+"' data-num='"+num+"'>" +
                            "<span data-icon='"+list.deviceIcon+"' style='background:" + list.deviceIcon +
                            " no-repeat left center;background-size:4rem auto;'>" +
                            "<strong>" + list.name + "</strong>" +
                            "<em>" + list.deviceState + "</em>" +
                            relative + "</span>" +
                            "<div class='delete deleteCondition'>" + lang_txt26 + "</div>" +
                            "</li>";
                        $(".conditionList").append(deviceStr);
                    }
                }
            })
        }
        $(".conditionList li").leftDelete({
            marginLeft: "-20%"
        });
        $(".conditionRelation").on("click", function () {
            info.setItem("relativeClick", "toggle");
            $(".relationDialog").show();
        });
        $(".conditionTime").on("click",function(e){
            e.stopPropagation();
            info.setItem("index",$(this).index());
            info.setItem("type",$(this).attr("data-type"));
            window.location = "effectiveDate.html";
        })
        $(".conditionDevice").on("click",function(e){
            e.stopPropagation();
            info.setItem("taskType","conditionTask");
            info.setItem("editFlag", "yes");
            info.setItem("deviceName",$(this).find("strong").html());
            info.setItem("deviceIcon",$(this).find("span").attr("data-icon"));
            info.setItem("deviceID",$(this).attr("data-devID"));
            info.setItem("num",$(this).attr("data-num"));
            info.setItem("type",$(this).attr("data-deviceType"));
            info.setItem("index",$(this).index());
            window.location = $(this).attr("data-url");
        })
    }

    function edit() {
        var actionArr = JSON.parse(info.getItem("actionArray"))

        // 初始化排序字典
        actionDic = {}

        if (actionArr == null) {
            $(".no_hide").show();
        } else {
            $(".no_hide").hide();
            $("#task").html("");
            actionArr.map(function (list, i) {

                // 生成用于排序的数据缓存
                actionDic[i] = list

                if (list.type === "0") {
                    var str
                    if (list.name == "") {
                        str =
                            '<li data-taskType="0" data-order=' + i +
                            ' ><a class="offline" href="javascript:;" style="line-height: 5rem;font-size:1.5rem ;">' +
                            lang_scene_delete + '</a><div class="delete deleteAction">' + lang_txt26 +
                            '</div></li>'
                    } else {
                        str =
                            "<li data-taskType='0' data-order=" + i +
                            "><a href='javascript:;' style='background:url(../../source/sceneIcon/scene_normal_" +
                            list.icon +
                            ".png) no-repeat left center;background-size:4.3rem auto'><span style='margin-top:0.8rem;'><strong>" +
                            list.name + " </strong><em style='display:block;clear:both;'></em><em>" + (parseInt(
                                parseInt(list.delay) / 60)) + lang_txt27 + (parseInt(list.delay) % 60) +
                            lang_txt28 + "</em></span>" +
                            '<b class="reorder-icon list-instant"></b>' +
                            "</a><div class='delete deleteAction'>" + lang_txt26 +
                            "</div></li>"
                    }
                } else {
                    var devID = list.object.split(">")[0];
                    if (list.name == "") {
                        str =
                            '<li data-taskType="2" data-devID="' + devID +
                            '" data-url="javascript:;" data-order=' + i +
                            ' ><a class="offline" href="javascript:;" style="line-height: 5rem;font-size:1.5rem ;">' +
                            lang_device_delete + '</a><div class="delete deleteAction">' + lang_txt26 +
                            '</div></li>'

                    } else {
                        var roomName = !list.roomName ? lang_group : list.roomName
                        var roomStr = "<em class='roomName' data-roomName='" + roomName + "'>[" + roomName +
                            "]</em>"
                        if (list.object.split(">")[2] == "CMICA2" || list.object.split(">")[2] == "CMICA3" ||
                            list.object.split(">")[2] == "CMICA4" || list.object.split(">")[2] == "CMICA5" ||
                            list.object.split(">")[2] == "CMICA6") {
                            roomStr = "<em class='roomName' data-roomName=''></em>"
                            list.name = languageUtil.getResource("device_name_" + list.object.split(">")[2]);
                        }
                        if (list.object.split(">")[2] == "XW01" || list.object.split(">")[2] == "HS05" || list.object
                            .split(">")[2] == "IF02") {
                            roomStr = "<em class='roomName' data-roomName=''></em>"
                        }
                        var cssStr = "3%";
                        if (list.switchName == undefined || list.switchName == null || list.switchName == "") {
                            list.switchName = ''
                            cssStr = "0";
                        }
                        var deviceType = list.object.split('>')[2];
                        var num = list.object.split(">")[1];
                        var sss = "";
                        if (deviceType == 'DD' ||
                            deviceType == '90' ||
                            deviceType == 'OZ' ||
                            deviceType == 'Ol' ||
                            deviceType == "62" ||
                            deviceType == "63" ||
                            deviceType == "At" ||
                            deviceType == "Ao" ||
                            deviceType == "An" ||
                            deviceType == "Bv" ||
                            deviceType == "Bw" ||
                            deviceType == "By" ||
                            deviceType == "Cm" ||
                            deviceType == "Cn"
                        ) {
                            sss = 'style="max-width: 100%;overflow:hidden;text-overflow:ellipsis;white-space: nowrap;"';
                        }else if(deviceType == "64"){
                            sss = 'style="max-width: 90%;overflow:hidden;text-overflow:ellipsis;white-space: nowrap;"';
                        }
                        str = "<li class='doTask'  data-taskType='2' data-order=" + i + "  data-devID='" +
                            devID + "' data-url='" + list.editUrl +
                            "' data-num='" + num + "' data-type='" + deviceType + "'>" +
                            "<a href='javascript:;' style='background:" + list.deviceIcon +
                            " no-repeat left center;background-size:4.3rem auto'>" +
                            "<span><strong>" + list.name + " </strong>" +
                            roomStr +
                            "<em style='margin-right:" + cssStr + ";'>" + list.switchName + "</em>" +
                            "<em " + sss + ">" + list.deviceState + "</em>" +
                            "<em style='max-width:80%;'>" + (parseInt(parseInt(list.delay) / 60)) + lang_txt27 +
                            (parseInt(list.delay) % 60) + lang_txt28 + "</em>" +
                            "</span>" +
                            '<b class="reorder-icon list-instant"></b>' +
                            "</a>" +
                            "<div class='delete deleteAction'>" + lang_txt26 + "</div>" +
                            "</li>"
                        if (list.switchName == undefined || list.switchName == null || list.switchName == "") {
                            $(str).find("a").find("span").find("em").eq(3).css("margin-right", "0")
                        }
                    }
                }
                $("#task").append(str)
            })
            //任务的左滑删除事件
            $("#task li").leftDelete({
                marginLeft: "-20%"
            });
            $("#task li").on("click", function (e) {
                e.stopPropagation();

                //再编辑增加返回弹出是否放弃修改弹窗
                info.setItem("editFlag", "yes");

                var taskType = $(this).attr("data-taskType");
                if (taskType == "2") {
                    var devID = $(this).attr("data-devID");
                    var url = $(this).attr("data-url");
                    var index = $(this).index();
                    var _this = $(this);
                    plus.gatewayCmd.getDeviceInfo(devID, function (data) {
                        info.setItem("taskType", "sceneTask");
                        if (data) {
                            if (data.type == "At" ||
                                data.type == "62" ||
                                data.type == "63" ||
                                data.type == "64" ||
                                data.type == "A1" ||
                                data.type == "B9" ||
                                data.type == "Aj" ||
                                data.type == "61" ||
                                data.type == "Ao" ||
                                data.type == "An" ||
                                data.type == "Am" ||
                                data.type == "Bu" ||
                                data.type == "Bv" ||
                                data.type == "Bw" ||
                                data.type == "Cl" ||
                                data.type == "Cm" ||
                                data.type == "Cn"
                            ) {
                                var nameList = [];
                                var translatorNumberList = [];
                                if (data.endpoints) {
                                    var endpoints = data.endpoints;
                                    for (var j in endpoints) {
                                        var endpointName = endpoints[j].endpointName ? endpoints[j].endpointName :
                                            device_switch + endpoints[j].endpointNumber;
                                        nameList.push(endpointName);
                                        translatorNumberList.push(endpoints[j].endpointNumber);
                                    }
                                }
                                if (data.type == "B9") {
                                    info.setItem("epNameList" + data.devID, JSON.stringify(nameList));
                                    info.setItem("numList", JSON.stringify(translatorNumberList));
                                } else {
                                    info.setItem("epNameList" + data.devID, JSON.stringify(nameList));
                                }
                                if (data.type == "Ao" ||
                                    data.type == "An" ||
                                    data.type == "Am" ||
                                    data.type == "Bu" ||
                                    data.type == "Bv" ||
                                    data.type == "Bw" ||
                                    data.type == "Cl" ||
                                    data.type == "Cm" ||
                                    data.type == "Cn") {
                                    if (data) {
                                        for (var i in data.endpoints) {
                                            if (data.endpoints[i].endpointNumber == 1) {
                                                if (data.endpoints[i].endpointType !== 2) {
                                                    info.setItem("lockThree" + data.devID, 1 + "非");
                                                } else {
                                                    info.setItem("lockThree" + data.devID, 1 + "正");
                                                }
                                            } else if (data.endpoints[i].endpointNumber == 2) {
                                                if (data.endpoints[i].endpointType !== 2) {
                                                    info.setItem("locktwo" + data.devID, 2 + "非");
                                                } else {
                                                    info.setItem("locktwo" + data.devID, 2 + "正");
                                                }
                                            } else if (data.endpoints[i].endpointNumber == 3) {
                                                if (data.endpoints[i].endpointType !== 2) {
                                                    info.setItem("lockone" + data.devID, 3 + "非");
                                                } else {
                                                    info.setItem("lockone" + data.devID, 3 + "正");
                                                }
                                            }

                                        }
                                    }
                                }
                            } else if (data.type == "Aw") {
                                var endpoints = data.endpoints;
                                endpoints.forEach(function (endpoint) {
                                    var endpointNum = endpoint.endpointNumber;
                                    if (endpointNum == 1) {
                                        var clusters = endpoint.clusters;
                                        clusters.forEach(function (cluster) {
                                            var attributes = cluster.attributes;
                                            attributes.forEach(function (attribute) {
                                                var attributeId = attribute.attributeId;
                                                var attributeValue = attribute.attributeValue;
                                                if (attributeId == 2) {
                                                    // 1：电铃模式  0：开关模式
                                                    info.setItem("AwMode" +
                                                        data[i].devID,
                                                        attributeValue);
                                                }
                                            })
                                        })
                                    }
                                });
                            }
                            info.setItem("deviceName", $(_this).find("strong").html());
                            info.setItem("deviceID", $(_this).attr("data-devID"));
                            info.setItem("num", $(_this).attr("data-num"));
                            info.setItem("type", $(_this).attr("data-type"));
                            info.setItem("deviceIcon", $(_this).find("a").css("background-image"));
                            info.setItem("roomName", $(_this).find(".roomName").attr("data-roomName"));
                            info.setItem("index", index);
                            if ($(_this).attr("data-type") == "22" ||
                                $(_this).attr("data-type") == "23" ||
                                $(_this).attr("data-type") == "24" ||
                                $(_this).attr("data-type") == "IF02") {
                                var param = {
                                    "deviceId": info.getItem("deviceID"),
                                    "deviceName": info.getItem("deviceName"),
                                    "deviceIcon": info.getItem("deviceIcon"),
                                    "num": info.getItem("num"),
                                    "type": info.getItem("type"),
                                    "roomName": info.getItem("roomName")
                                };
                                plus.tools.infraredSceneOrHouseKepper(param, function (data) {

                                });
                            } else {
                                window.location = url;
                            }
                        }
                    });
                }
            });
        }

        setupSlip(document.getElementById("task"));
    }

    //重命名
    $(".taskName").on("click", function () {
        info.setItem("editFlag","yes");
        $("#rename").show();
        $("#renameInput").val($("#circumstances_tittle_1").text());
    })
    //重命名
    $(".remove").on("click", function () {
        $(this).siblings("input").val("")
    })
    $("#renameInput").on("input porpertychange", function () {
        if ($(this).val().length >= 1) {
            $(".sure_click").css("color", "#8DD652")
        }
    })

    function surename() {
        var value = document.getElementById("renameInput").value;
        if (value.length > 20 || value.length < 1) {
            window.showDialog.show(lang_txt29, 3000);
        } else {
            $(".taskName").find("span").html(value);
            info.setItem("programName", value);
        }
        cancel();
    }

    function cancel() {
        $(".changeName").hide();
    }

    $(".meetCondition").on("click", function (e) {
        info.setItem("editFlag", "yes");
        info.setItem("top", 1);
        info.setItem("index", "add");
        window.location = "triggerDeviceList.html"
    })
    $(".circums #eTask").on("click", function (e) {
        info.setItem("editFlag", "yes");
        $(".content_1").hide();
        $(".content_3").show();
        $(".complete").hide();
        info.setItem("top", 2);
        info.setItem("index", "noEdit");
    })
    $(".addTask li").on("click", function () {
        info.setItem("flag", $(this).index() == 0 ? "2" : "0")
    })
    $("#back").on("click", function (e) {
        e.stopPropagation()
        if ($(".content_1").css("display") == "block") {
            if (info.getItem("editFlag") == "yes") {
                $("#giveUpEdit").show()
            } else {
                info.clear()
                plus.tools.back(function(){});
            }
        } else {
            $(".content_1").show();
            $(".content_3").hide();
            $(".complete").show();
        }
    })
    //取消放弃编辑
    $(".isNo").click(function () {
        $("#giveUpEdit").hide()
    });

    //发送的创建管家数据
    function addConnectTask() {
        var param = houserkeeperModel.send_add_507;
        param.gwID = gwID;
        param.appID = appID;
        param.operType = "C";
        param.newVer = info.getItem("version");
        param.programName = $(".taskName").find("span").html()
        param.programType = "2";
        param.status = "1";
        param.conditionArray = [];
        if (info.getItem("conditionArray") && info.getItem("conditionArray") != "[]") {
            var m = getConditionArray(JSON.parse(info.getItem("conditionArray")));
            param.conditionArray = m;
            if (info.getItem("relative") == "and") {
                var timeCount = JSON.parse(info.getItem("timeCount"));
                var sceneCount = JSON.parse(info.getItem("sceneCount"));
                if (timeCount > 1 || sceneCount > 1) {
                    $(".conditionDialog").show();
                    $(".saveToast").hide();
                    clearOvertimeWarn();
                    return;
                }
            }
        } else {
            delete param.conditionArray;
        }
        if (info.getItem("ldArr") == null || info.getItem("actionArray") == null || info.getItem("ldArr") == "[]" ||
            info.getItem("actionArray") == "[]") {
            alert(lang_txt30)
            $(".saveToast").hide();
            clearOvertimeWarn();
        } else {
            var arr = JSON.parse(info.getItem("ldArr"))
            for (var i = 0; i < arr.length; i++) {
                delete arr[i].deviceIcon
            }
            param.triggerArray = arr;
            var p = JSON.parse(info.getItem("actionArray"))
            for (var i = 0; i < p.length; i++) {
                delete p[i].deviceIcon
            }
            param.actionArray = p
            plus.gatewayCmd.houserkeep_507(param, function (data) {
                $(".saveToast").hide();
                clearOvertimeWarn();
                if(data.cmd === "507"){
                    // alert(JSON.stringify(data));
                    if(data.errCode && data.errCode === 1){
                        alert(languageUtil.getResource("switch_Aj_At_no_choose_hint"));
                    }else{
                        info.clear();
                        plus.tools.back(function(){});
                    }
                }
            })
        }
    }

    //编辑管家命令
    function changeConnectTask() {
        var param = {};
        param.cmd = "507"
        param.gwID = gwID;
        param.appID = appID;
        param.programID = info.getItem("programID")
        param.operType = "U";
        param.newVer = info.getItem("version");
        param.programName = $(".taskName").find("span").html()
        param.programType = "2";
        param.status = info.getItem("status");
        param.conditionArray = []
        if (info.getItem("conditionArray") && info.getItem("conditionArray") != "[]") {
            var m = getConditionArray(JSON.parse(info.getItem("conditionArray")))
            param.conditionArray = m;
            if (info.getItem("relative") == "and") {
                var timeCount = JSON.parse(info.getItem("timeCount"));
                var sceneCount = JSON.parse(info.getItem("sceneCount"));
                if (timeCount > 1 || sceneCount > 1) {
                    $(".conditionDialog").show();
                    $(".saveToast").hide();
                    clearOvertimeWarn();
                    return;
                }
            }
        } else {
            delete param.conditionArray;
        }
        if (info.getItem("ldArr") == null || info.getItem("actionArray") == null || info.getItem("ldArr") == "[]" ||
            info.getItem("actionArray") == "[]") {
            alert(lang_txt30)
            $(".saveToast").hide();
            clearOvertimeWarn();
        } else {
            var arr = JSON.parse(info.getItem("ldArr"));
            for (var i = 0; i < arr.length; i++) {
                delete arr[i].deviceIcon
            }
            param.triggerArray = arr;
            var p = JSON.parse(info.getItem("actionArray"))
            for (var i = 0; i < p.length; i++) {
                delete p[i].deviceIcon
                delete p[i].switchName
            }
            param.actionArray = p;
            plus.gatewayCmd.houserkeep_507(param, function (data) {
                $(".saveToast").hide();
                clearOvertimeWarn();
                if(data.cmd === "507" && data.programID === param.programID){
                    // alert(JSON.stringify(data));
                    if(data.errCode && data.errCode === 1){
                        alert(languageUtil.getResource("switch_Aj_At_no_choose_hint"));//"设备不支持在场景或管家中既做触发条件又做执行任务，请检查您的设置"
                    }else{
                        info.clear();
                        plus.tools.back(function(){});
                    }
                }
            })
        }
    }

    $(".conditionBtn").on("click", function () {
        $(".conditionDialog").hide();
    });
    $(".complete").on("click", function () {
        $(".saveToast").show();
        overtimeWarn();

        // 根据排序生成数据
        var actionArr = []
        $("#task").find("li").each(function () {
            var dataId = $(this).data("order")
            actionArr.push(actionDic[dataId])
        })
        info.setItem("actionArray", JSON.stringify(actionArr))

        if (info.getItem("programID") != null) {
            changeConnectTask()
        } else {
            addConnectTask()
        }
    });

    function getConditionArray(m) {
        //		    var relative = "";
        var len = m.length;
        var mCondition = [];
        mCondition = m;
        for (var k = 0; k < len - 1; k++) {
            if (info.getItem("relative") == "and") {
                var data1 = {
                    "exp": "and"
                };
                mCondition.unshift(data1);
            } else {
                var data2 = {
                    "exp": "or"
                };
                mCondition.unshift(data2);
            }
        }
        for (var j = 0; j < mCondition.length; j++) {
            delete mCondition[j].deviceIcon;
            delete mCondition[j].deviceState;
            delete mCondition[j].startTime;
            delete mCondition[j].endTime;
            delete mCondition[j].weekStr;
        }
        return mCondition;
    }

    function getWeekNum(weekArr) {
        var numArr = [];
        var num;
        if (weekArr) {
            for (var i = 0; i < weekArr.length; i++) {
                switch (weekArr[i]) {
                    case "Mon":
                        num = 0;
                        break;
                    case "Tue":
                        num = 1;
                        break;
                    case "Wed":
                        num = 2;
                        break;
                    case "Thu":
                        num = 3;
                        break;
                    case "Fri":
                        num = 4;
                        break;
                    case "Sat":
                        num = 5;
                        break;
                    case "Sun":
                        num = 6;
                        break;
                }
                numArr.push(num);
            }
            return numArr;
        }
    }

    // 排序支持
    function setupSlip(list) {
        list.addEventListener('slip:beforereorder', function (e) {
            // 禁止排序
            if (e.target.classList.contains('list-no-reorder')) {
                e.preventDefault();
            }
        }, false);

        list.addEventListener('slip:beforeswipe', function (e) {
            // 禁止左右滑动
            e.preventDefault();
        }, false);

        list.addEventListener('slip:beforewait', function (e) {
            // 立即开始排序
            if (e.target.classList.contains('list-instant')) e.preventDefault();
        }, false);

        list.addEventListener('slip:afterswipe', function (e) {
            // 滑动之后的处理
            e.target.parentNode.appendChild(e.target);
        }, false);

        list.addEventListener('slip:reorder', function (e) {
            // 排序之后的处理
            e.target.parentNode.insertBefore(e.target, e.detail.insertBefore);
            return false;
        }, false);
        return new Slip(list);
    }
    //超时提醒
    function overtimeWarn() {
        overtime = setTimeout(function () {
            $(".overTime").show();
            $(".saveToast").hide();
            setTimeout(function () {
                $(".overTime").hide();
            }, 3000)
        }, 15000);
    }

    function clearOvertimeWarn() {
        clearTimeout(overtime);
    }

    // 键盘收起事件
    document.body.addEventListener('focusout', function () {
        console.log($("body").scrollTop) // 0
        var u = navigator.userAgent,
            app = navigator.appVersion;
        var isiOS = !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/); //ios终端
        if (isiOS) {
            window.scrollTo(0, 0);
        }
    })
</script>

</html>
